/**
  * v1.0.42 generated on: Tue Aug 30 2016 23:31:24 GMT+0000 (UTC)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved. See LICENSE (BSD).
  */
"use strict";if(window.NGNX=window.NGNX||{},window.NGNX.DATA=window.NGNX.DATA||{},!NGN.DATA.Proxy||!NGN.NET)throw new Error("NGN.DATA.Proxy & NGN.NET are required for NGN.DATA.HttpProxy.");window.NGNX.DATA.HttpProxy=function(t){t=t||{},this.constructor(t);var e=this;Object.defineProperties(this,{headers:NGN.define(!0,!0,!1,t.headers||{}),options:NGN._get(function(){var t={url:this.url,headers:this.headers};return this.token&&(t.accessToken=this.token),this.username&&(t.username=this.username),this.password&&(t.password=this.password),this.username&&this.password&&(t.withCredentials=!0),t}),save:NGN.define(!0,!1,!1,function(t,s){"function"==typeof url&&(s=t,t="");var r=0,n=function(t,n){return function(o){r++,200!==o.status&&201!==o.status&&NGN.emit("save.error",{message:o.responseText,status:o.status,action:t,model:n}),r===e.actions.create.length+e.actions.update.length+e.actions["delete"].length&&s&&s()}},o=this.options;o.url+=t||"",this.actions.create.forEach(function(t){o.json=t.data,NGN.NET.post(o,n("create",t))}),this.actions.update.forEach(function(t){o.url+="/"+t.id,o.json=t.data,NGN.NET.put(o,n("update",t))}),this.actions["delete"].forEach(function(t){o.url+="/"+t.id,NGN.NET["delete"](o,n("delete",t))})}),fetch:NGN.define(!0,!1,!1,function(t,s){var r=this.options;r.url+=t||"",NGN.NET.get(r,function(t){var r=t.responseText;"string"==typeof r&&(r=JSON.parse(r)),r instanceof Array&&e.store.reload(r),s&&s()})})})},NGN.inherit(NGN.DATA.Proxy,NGNX.DATA.HttpProxy);