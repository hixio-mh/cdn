{"version":3,"sources":["core.js","chassis.slim.min.js","eventemitter.js","ngn.js","exception.js","dom.js","bus.js","reference.js","net.js","svg.js"],"names":["_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_typeof","Symbol","iterator","obj","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","window","NGN","e","w","c","v","public","define","private","const","privateconst","get","fn","set","extend","attribute","specification","this","inherit","source","dest","getOwnPropertyNames","forEach","attr","definition","getOwnPropertyDescriptor","slice","Array","splice","coalesce","arg","arguments","undefined","nodelike","node","require","dedupe","array","filter","element","index","indexOf","typeof","el","toString","split","replace","toLowerCase","name","stack","me","Error","item","map","location","origin","process","cwd","trim","path","substr","file","line","parseInt","column","reverse","css","global","document","addEventListener","body","classList","add","EventEmitter","cfg","handlers","adhoc","maxlisteners","defaultMaxListeners","eventName","keys","concat","callback","prepend","emit","listenerCount","on","apply","args","push","once","handlerFn","deleteEventHandler","type","scope","_ret","result","handler","off","onceoff","_this","clear","shift","events","getAllEvents","event","adhocEvent","pop","_fn","regularEvents","adhocEvents","allEvents","RegExp","test","subscriberList","_eventName","queued","pool","prefix","group","topic","console","warn","attach","preventDefaultAction","hasOwnProperty","preventDefault","unshift","bind","triggers","payload","listener","trigger","argList","remove","queue","delay","_this2","_arguments","setTimeout","CustomException","_Error","config","_this3","getPrototypeOf","message","custom","severity","category","prepareStackTrace","_","_err","captureStackTrace","rawstack","err","cause","help","info","frame","getFileName","__filename","join","filename","getLineNumber","getColumnNumber","functionname","getFunctionName","native","isNative","eval","isEval","getTypeName","module","exports","DOM","ready","destroy","str","querySelectorAll","parentNode","removeChild","log","findParent","selector","maxDepth","currentNode","querySelector","nodeName","indexOfParent","children","ref","requireBUS","nm","BUS","error","qs","all","_find","reference","find","tmpref","html","els","isArray","base","evt","removeEventListener","forward","cleankey","cleanKey","val","ck","json","parser","DOMParser","fs","Network","xhr","res","XMLHttpRequest","onreadystatechange","readyState","run","method","url","NET","open","send","applyRequestSettings","params","parms","parm","encodeURIComponent","header","headers","setRequestHeader","JSON","stringify","form","FormData","append","withCredentials","username","password","btoa","accessToken","getFile","rsp","status","existsSync","responseText","readFileSync","normalizeUrl","uri","processImport","before","createTextNode","_ret3","out","insertBefore","appendChild","domainRoot","r","search","match","host","isCrossOrigin","prelink","rel","cor","head","p","createElement","href","pathname","setAttribute","importCache","parseFromString","applyData","tpl","data","re","parse","bypassCache","_this4","_ret4","num","int","setInterval","clearInterval","ext","s","onload","getElementsByTagName","doc","domain","protocol","fuoc","ss","svg","_cache","swap","svgs","attributes","output","getAttribute","attrs","exec","sep","x","idx","a","outerHTML","id","cleanCode","code","viewbox","cache","fetchFile","_this5","content","resolve","__dirname","ee","update","section","_splice","sec","imgs","unfetched","remaining","monitor"],"mappings":"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","file":"chassis.slim.min.js","sourcesContent":["'use strict'\n\n/**\n * @class NGN\n * @singleton\n */\n/**\n  * @method define\n  * Create an object definition for a property.\n  * For example:\n  *\n  * ```\n  * Object.defineProperty('attr', NGN.define(true, false, true, 'value'))\n  *\n  * // The snippet above is the same as:\n  * Object.defineProperty(this, 'attr', {\n  *  enumberable: true,\n  *  writable: false,\n  *  configurable: true,\n  *  value: 'value'\n  * })\n  * ```\n  * @param  {boolean} enumerable\n  * Determines if the attribute is considered an accessible part of the object.\n  * Making an attribute enumerable will make it show up as a key in an object,\n  * which can be iterated over (ex: `Object.keys()`). A non-enumerable asset is\n  * treated as a private attribute.\n  * @param  {boolean} writable\n  * Determines whether the value can be changed.\n  * @param  {boolean} configurable\n  * Determines whether the attribute can be removed from the object.\n  * @param  {any} value\n  * The actual value of the attribute.\n  * @private\n  */\nObject.defineProperty(NGN, 'define', {\n  enumerable: false,\n  writable: false,\n  configurable: false,\n  value: function (e, w, c, v) {\n    return {\n      enumerable: e,\n      writable: w,\n      configurable: c,\n      value: v\n    }\n  }\n})\n\nObject.defineProperties(NGN, {\n  /**\n   * @method public\n   * Create a `public` property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.public('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: true,\n   *  writable: true,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  public: NGN.define(false, false, false, function (value) {\n    return NGN.define(true, typeof value !== 'function', false, value)\n  }),\n\n  /**\n   * @method private\n   * Create a `private` property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.private('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  writable: true,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  private: NGN.define(false, false, false, function (value) {\n    return NGN.define(false, typeof value !== 'function', false, value)\n  }),\n\n  /**\n   * @method const\n   * Create a `public` constant property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.const('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: true,\n   *  writable: false,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  const: NGN.define(false, false, false, function (value) {\n    return NGN.define(true, false, false, value)\n  }),\n\n  /**\n   * @method privateconst\n   * Create a `private` constant property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.privateconst('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  writable: false,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  privateconst: NGN.define(false, false, false, function (value) {\n    return NGN.define(false, false, false, value)\n  }),\n\n  /**\n   * @method get\n   * Create a private `getter` property definition for an object.\n   * Public getters are part of the ES2015 class spec.\n   *\n   * Example:\n   *\n   * ```\n   * let myFunction = function () {\n   *  return 'somevalue'\n   * }\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  get: function () {\n   *    return 'somevalue'\n   *  }\n   * })\n   * ```\n   * @param  {function} fn\n   * Any valid async JavaScript function with a `return` value.\n   * @private\n   */\n  get: NGN.define(false, false, false, function (fn) {\n    return {\n      enumerable: false,\n      get: fn\n    }\n  }),\n\n  /**\n   * @method get\n   * Create a private `setter` property definition for an object.\n   * Public setters are part of the ES2015 class spec.\n   *\n   * Example:\n   *\n   * ```\n   * let myFunction = function () {\n   *  return 'somevalue'\n   * }\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  set: function (value) {\n   *    somethingElse = value\n   *  }\n   * })\n   * ```\n   * @param  {function} fn\n   * Any valid async JavaScript function with a `return` value.\n   * @private\n   */\n  set: NGN.define(false, false, false, function (fn) {\n    return {\n      enumerable: false,\n      set: fn\n    }\n  })\n})\n\nObject.defineProperties(NGN, {\n  /**\n   * @method extend\n   * Extend the NGN core object. Extending NGN is the equivalent of:\n   *\n   * Example:\n   * ```\n   * NGN.extend('greet', NGN.public(function (recipient) {\n   *  return 'Hello, ' + recipient + '!'\n   * }))\n   *\n   * // Equivalent of:\n   *\n   * Object.defineProperty(NGN, 'greet', {\n   *  enumerable: true,\n   *  writable: false,\n   *  configurable: false,\n   *  value: function (recipient) {\n   *    return 'Hello, ' + recipient + '!'\n   *  }\n   * })\n   * ```\n   * The example above produces a public function available from NGN:\n   *\n   * ```\n   * console.log(NGN.greet('world')) // outputs Hello, world!\n   * @param  {string} attribute\n   * Name of the attribute to add to the object.\n   * @param  {Object} specification\n   * The object specification, i.e.\n   * ```\n   * {\n   *  enumerable: true/false,\n   *  writable: true/false,\n   *  configurable: true/false,\n   *  value: {any}\n   * }\n   *\n   * // OR\n   *\n   * {\n   *  enumerable: true/false,\n   *  get: function () { return ... },\n   *  set: function (value) { some = value ... }\n   * }\n   * ```\n   * @private\n   */\n  extend: NGN.privateconst(function (attribute, specification) {\n    Object.defineProperty(this, attribute, specification)\n  }),\n\n  /**\n   * @method inherit\n   * Inherit the properties of another object/class.\n   * @param  {object|function} source\n   * The source object (i.e. what gets copied)\n   * @param  {object|function} destination\n   * The object properties get copied to.\n   */\n  inherit: NGN.const(function (source, dest) {\n    if (!source || !dest) {\n      return\n    }\n    source = typeof source === 'function' ? source.prototype : source\n    dest = typeof dest === 'function' ? dest.prototype : dest\n    Object.getOwnPropertyNames(source).forEach(function (attr) {\n      const definition = Object.getOwnPropertyDescriptor(source, attr)\n      Object.defineProperty(dest, attr, definition)\n    })\n  }),\n\n  /**\n   * @method slice\n   * Converts an array-like object to an array.\n   *\n   * Example:\n   * ```\n   * function () {\n   *  return NGN.slice(arguments)\n   * }\n   * @param  {Object} obj\n   * The object to slice into an array.\n   * @return {array}\n   * @private\n   */\n  slice: NGN.private(function (obj) {\n    return Array.prototype.slice.call(obj)\n  }),\n\n  /**\n   * @method splice\n   * Converts an array-like object to a spliced array.\n   *\n   * Example:\n   * ```\n   * function () {\n   *  return NGN.splice(arguments)\n   * }\n   * @param  {Object} obj\n   * The object to splice into an array.\n   * @return {array}\n   * @private\n   */\n  splice: NGN.private(function (obj) {\n    return Array.prototype.splice.call(obj)\n  }),\n\n  /**\n   * @method coalesce\n   * Finds the first non-null/defined value in a list of arguments.\n   * This can be used with {@link Boolean Boolean} values, since `true`/`false` is a\n   * non-null/defined value.\n   * @param {Mixed} args\n   * Any number of arguments can be passed to this method.\n   */\n  coalesce: NGN.public(function () {\n    for (let arg in arguments) {\n      if (arguments[arg] !== undefined && arguments[arg] !== null) {\n        return arguments[arg]\n      }\n    }\n    return null\n  }),\n\n  /**\n   * @property {boolean} nodelike\n   * Indicates NGN is running in a node-like environment supporting\n   * the `require` statement. This will detect node, io.js, Electron,\n   * NW.js, and other environments presumably supporting Node.js.\n   * @private\n   */\n  nodelike: NGN.get(function () {\n    let node = false\n    try {\n      node = require !== undefined\n    } catch (e) {}\n    return node\n  }),\n\n  /**\n   * @method dedupe\n   * Deduplicate a simple array.\n   * @param {array} array\n   * The array to deduplicate.\n   * @return {array}\n   * The array with unique records.\n   * @private\n   */\n  dedupe: NGN.private(function (array) {\n    return array.filter(function (element, index) {\n      return array.indexOf(element) === index\n    })\n  }),\n\n  /**\n   * @method typeof\n   * A more specific typeof method.\n   * @param  {any} element\n   * The element to determine the type of.\n   * @return {string}\n   * Returns the type (all lower case).\n   */\n  typeof: NGN.define(false, false, false, function (el) {\n    var value = Object.prototype.toString.call(el).split(' ')[1].replace(/\\]|\\[/gi, '').toLowerCase()\n    if (value === 'function') {\n      if (!el.name) {\n        return el.toString().replace(/\\n/gi, '').replace(/^function\\s|\\(.*$/mgi,'').toLowerCase()\n      } else {\n        value = el.name || 'function'\n      }\n    }\n    return value.toLowerCase();\n   }),\n\n  /**\n   * @method stack\n   * Retrieve the stack trace from a specific code location without throwing\n   * an exception. Files are always listed from the root. This is the default\n   * order in browsers, but the reverse of the normal stack order in node-like\n   * environments.\n   *\n   * For example, the following stack on node shows `_test.js` as the last item\n   * in the array. In node-like environments, the `_test.js` would normally be\n   * the first item in the stacktrace.\n   *\n   * ```js\n   * [\n   *   { path: 'node.js:348:7', file: 'node.js', line: 348, column: 7 },\n   *   { path: 'module.js:575:10',\n   *     file: 'module.js',\n   *     line: 575,\n   *     column: 10 },\n   *   { path: 'module.js:550:10',\n   *     file: 'module.js',\n   *     line: 550,\n   *     column: 10 },\n   *   { path: 'module.js:541:32',\n   *     file: 'module.js',\n   *     line: 541,\n   *     column: 32 },\n   *   { path: '/_test.js:8:14', file: '/_test.js', line: 8, column: 14 }\n   * ]\n   * ```\n   *\n   * By standardizing the order of the stack trace, it is easier to programmatically\n   * identify sources of problems. This method does not prevent developers from\n   * accessing a normal stacktrace.\n   * @private\n   * @returns {array}\n   * Returns an array of objects. Each object contains the file, line, column,\n   * and path within the stack. For example:\n   *\n   * ```\n   * {\n   * \t path: 'path/to/file.js:127:14'\n   *   file: 'path/to/file.js',\n   *   line: 127,\n   *   column: 14\n   * }\n   * ```\n   *\n   * If a stacktrace is unavailable for any reason, the array will contain a\n   * single element like:\n   *\n   * ```js\n   * {\n   *   path: 'unknown',\n   *   file: 'unknown',\n   *   line: 0,\n   *   column: 0\n   * }\n   * ```\n   */\n  stack: NGN.get(function () {\n    const me = this\n    const originalStack = (new Error).stack.split('\\n')\n    let stack = (new Error).stack.split('\\n') || []\n\n    stack = stack.filter(function (item) {\n      return item.split(':').length > 1\n    }).map(function (item) {\n      item = item\n        .replace(/^.*\\s\\(/i, '')\n        .replace(/\\)/gi, '')\n        .replace(/^.*\\@/i, '')\n        .replace((window !== undefined ? window.location.origin : (process !== undefined ? process.cwd() : '')), '')\n        .replace(/^.*\\:\\/\\//, '')\n        .replace(/\\s{1,100}at\\s{1,100}/gi, '')\n        .replace(/anonymous\\>/, 'console')\n        .trim().split(':')\n\n      return {\n        path: item[0].substr(me.nodelike ? 0 : 1, item[0].length - (me.nodelike ? 0 : 1)) + ':' + item[1] + ':' + item[2],\n        file: item[0].substr(me.nodelike ? 0 : 1, item[0].length - (me.nodelike ? 0 : 1)),\n        line: parseInt(item[1], 10),\n        column: parseInt(item[2], 10)\n      }\n    })\n\n    if (stack.length === 0) {\n      return [{\n        path: 'unknown',\n        file: 'unknown',\n        line: 0,\n        column: 0\n      }]\n    } else if (me.nodelike) {\n      stack.reverse()\n    }\n\n    return stack\n  }),\n\n  /**\n   * @property css\n   * A CSS string used for highlighting console output in Chrome and Firefox.\n   *\n   * **Example:**\n   *\n   * ```js\n   * console.log('%cHighlight %c some text and leave the rest normal.', NGN.css, '')\n   * ```\n   * @private\n   */\n  css: NGN.privateconst('font-weight: bold;')\n})\n","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nwindow.NGN = {};\n\n'use strict';\n\n/**\n * @class NGN\n * @singleton\n */\n/**\n  * @method define\n  * Create an object definition for a property.\n  * For example:\n  *\n  * ```\n  * Object.defineProperty('attr', NGN.define(true, false, true, 'value'))\n  *\n  * // The snippet above is the same as:\n  * Object.defineProperty(this, 'attr', {\n  *  enumberable: true,\n  *  writable: false,\n  *  configurable: true,\n  *  value: 'value'\n  * })\n  * ```\n  * @param  {boolean} enumerable\n  * Determines if the attribute is considered an accessible part of the object.\n  * Making an attribute enumerable will make it show up as a key in an object,\n  * which can be iterated over (ex: `Object.keys()`). A non-enumerable asset is\n  * treated as a private attribute.\n  * @param  {boolean} writable\n  * Determines whether the value can be changed.\n  * @param  {boolean} configurable\n  * Determines whether the attribute can be removed from the object.\n  * @param  {any} value\n  * The actual value of the attribute.\n  * @private\n  */\nObject.defineProperty(NGN, 'define', {\n  enumerable: false,\n  writable: false,\n  configurable: false,\n  value: function value(e, w, c, v) {\n    return {\n      enumerable: e,\n      writable: w,\n      configurable: c,\n      value: v\n    };\n  }\n});\n\nObject.defineProperties(NGN, {\n  /**\n   * @method public\n   * Create a `public` property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.public('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: true,\n   *  writable: true,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  public: NGN.define(false, false, false, function (value) {\n    return NGN.define(true, typeof value !== 'function', false, value);\n  }),\n\n  /**\n   * @method private\n   * Create a `private` property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.private('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  writable: true,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  private: NGN.define(false, false, false, function (value) {\n    return NGN.define(false, typeof value !== 'function', false, value);\n  }),\n\n  /**\n   * @method const\n   * Create a `public` constant property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.const('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: true,\n   *  writable: false,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  const: NGN.define(false, false, false, function (value) {\n    return NGN.define(true, false, false, value);\n  }),\n\n  /**\n   * @method privateconst\n   * Create a `private` constant property definition for an object.\n   * Example:\n   *\n   * ```\n   * Object.defineProperty(this, 'attr', NGN.privateconst('somevalue'))\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  writable: false,\n   *  configurable: false,\n   *  value: 'somevalue'\n   * })\n   * ```\n   * @param  {any} value\n   * Any valid JavaScript value (function, boolean, number, string, etc)\n   * used as the value for the object attribute.\n   * @private\n   */\n  privateconst: NGN.define(false, false, false, function (value) {\n    return NGN.define(false, false, false, value);\n  }),\n\n  /**\n   * @method get\n   * Create a private `getter` property definition for an object.\n   * Public getters are part of the ES2015 class spec.\n   *\n   * Example:\n   *\n   * ```\n   * let myFunction = function () {\n   *  return 'somevalue'\n   * }\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  get: function () {\n   *    return 'somevalue'\n   *  }\n   * })\n   * ```\n   * @param  {function} fn\n   * Any valid async JavaScript function with a `return` value.\n   * @private\n   */\n  get: NGN.define(false, false, false, function (fn) {\n    return {\n      enumerable: false,\n      get: fn\n    };\n  }),\n\n  /**\n   * @method get\n   * Create a private `setter` property definition for an object.\n   * Public setters are part of the ES2015 class spec.\n   *\n   * Example:\n   *\n   * ```\n   * let myFunction = function () {\n   *  return 'somevalue'\n   * }\n   *\n   * // Longhand equivalent\n   * Object.defineProperty(this, 'attr', {\n   *  enumerable: false,\n   *  set: function (value) {\n   *    somethingElse = value\n   *  }\n   * })\n   * ```\n   * @param  {function} fn\n   * Any valid async JavaScript function with a `return` value.\n   * @private\n   */\n  set: NGN.define(false, false, false, function (fn) {\n    return {\n      enumerable: false,\n      set: fn\n    };\n  })\n});\n\nObject.defineProperties(NGN, {\n  /**\n   * @method extend\n   * Extend the NGN core object. Extending NGN is the equivalent of:\n   *\n   * Example:\n   * ```\n   * NGN.extend('greet', NGN.public(function (recipient) {\n   *  return 'Hello, ' + recipient + '!'\n   * }))\n   *\n   * // Equivalent of:\n   *\n   * Object.defineProperty(NGN, 'greet', {\n   *  enumerable: true,\n   *  writable: false,\n   *  configurable: false,\n   *  value: function (recipient) {\n   *    return 'Hello, ' + recipient + '!'\n   *  }\n   * })\n   * ```\n   * The example above produces a public function available from NGN:\n   *\n   * ```\n   * console.log(NGN.greet('world')) // outputs Hello, world!\n   * @param  {string} attribute\n   * Name of the attribute to add to the object.\n   * @param  {Object} specification\n   * The object specification, i.e.\n   * ```\n   * {\n   *  enumerable: true/false,\n   *  writable: true/false,\n   *  configurable: true/false,\n   *  value: {any}\n   * }\n   *\n   * // OR\n   *\n   * {\n   *  enumerable: true/false,\n   *  get: function () { return ... },\n   *  set: function (value) { some = value ... }\n   * }\n   * ```\n   * @private\n   */\n  extend: NGN.privateconst(function (attribute, specification) {\n    Object.defineProperty(this, attribute, specification);\n  }),\n\n  /**\n   * @method inherit\n   * Inherit the properties of another object/class.\n   * @param  {object|function} source\n   * The source object (i.e. what gets copied)\n   * @param  {object|function} destination\n   * The object properties get copied to.\n   */\n  inherit: NGN.const(function (source, dest) {\n    if (!source || !dest) {\n      return;\n    }\n    source = typeof source === 'function' ? source.prototype : source;\n    dest = typeof dest === 'function' ? dest.prototype : dest;\n    Object.getOwnPropertyNames(source).forEach(function (attr) {\n      var definition = Object.getOwnPropertyDescriptor(source, attr);\n      Object.defineProperty(dest, attr, definition);\n    });\n  }),\n\n  /**\n   * @method slice\n   * Converts an array-like object to an array.\n   *\n   * Example:\n   * ```\n   * function () {\n   *  return NGN.slice(arguments)\n   * }\n   * @param  {Object} obj\n   * The object to slice into an array.\n   * @return {array}\n   * @private\n   */\n  slice: NGN.private(function (obj) {\n    return Array.prototype.slice.call(obj);\n  }),\n\n  /**\n   * @method splice\n   * Converts an array-like object to a spliced array.\n   *\n   * Example:\n   * ```\n   * function () {\n   *  return NGN.splice(arguments)\n   * }\n   * @param  {Object} obj\n   * The object to splice into an array.\n   * @return {array}\n   * @private\n   */\n  splice: NGN.private(function (obj) {\n    return Array.prototype.splice.call(obj);\n  }),\n\n  /**\n   * @method coalesce\n   * Finds the first non-null/defined value in a list of arguments.\n   * This can be used with {@link Boolean Boolean} values, since `true`/`false` is a\n   * non-null/defined value.\n   * @param {Mixed} args\n   * Any number of arguments can be passed to this method.\n   */\n  coalesce: NGN.public(function () {\n    for (var arg in arguments) {\n      if (arguments[arg] !== undefined && arguments[arg] !== null) {\n        return arguments[arg];\n      }\n    }\n    return null;\n  }),\n\n  /**\n   * @property {boolean} nodelike\n   * Indicates NGN is running in a node-like environment supporting\n   * the `require` statement. This will detect node, io.js, Electron,\n   * NW.js, and other environments presumably supporting Node.js.\n   * @private\n   */\n  nodelike: NGN.get(function () {\n    var node = false;\n    try {\n      node = require !== undefined;\n    } catch (e) {}\n    return node;\n  }),\n\n  /**\n   * @method dedupe\n   * Deduplicate a simple array.\n   * @param {array} array\n   * The array to deduplicate.\n   * @return {array}\n   * The array with unique records.\n   * @private\n   */\n  dedupe: NGN.private(function (array) {\n    return array.filter(function (element, index) {\n      return array.indexOf(element) === index;\n    });\n  }),\n\n  /**\n   * @method typeof\n   * A more specific typeof method.\n   * @param  {any} element\n   * The element to determine the type of.\n   * @return {string}\n   * Returns the type (all lower case).\n   */\n  typeof: NGN.define(false, false, false, function (el) {\n    var value = Object.prototype.toString.call(el).split(' ')[1].replace(/\\]|\\[/gi, '').toLowerCase();\n    if (value === 'function') {\n      if (!el.name) {\n        return el.toString().replace(/\\n/gi, '').replace(/^function\\s|\\(.*$/mgi, '').toLowerCase();\n      } else {\n        value = el.name || 'function';\n      }\n    }\n    return value.toLowerCase();\n  }),\n\n  /**\n   * @method stack\n   * Retrieve the stack trace from a specific code location without throwing\n   * an exception. Files are always listed from the root. This is the default\n   * order in browsers, but the reverse of the normal stack order in node-like\n   * environments.\n   *\n   * For example, the following stack on node shows `_test.js` as the last item\n   * in the array. In node-like environments, the `_test.js` would normally be\n   * the first item in the stacktrace.\n   *\n   * ```js\n   * [\n   *   { path: 'node.js:348:7', file: 'node.js', line: 348, column: 7 },\n   *   { path: 'module.js:575:10',\n   *     file: 'module.js',\n   *     line: 575,\n   *     column: 10 },\n   *   { path: 'module.js:550:10',\n   *     file: 'module.js',\n   *     line: 550,\n   *     column: 10 },\n   *   { path: 'module.js:541:32',\n   *     file: 'module.js',\n   *     line: 541,\n   *     column: 32 },\n   *   { path: '/_test.js:8:14', file: '/_test.js', line: 8, column: 14 }\n   * ]\n   * ```\n   *\n   * By standardizing the order of the stack trace, it is easier to programmatically\n   * identify sources of problems. This method does not prevent developers from\n   * accessing a normal stacktrace.\n   * @private\n   * @returns {array}\n   * Returns an array of objects. Each object contains the file, line, column,\n   * and path within the stack. For example:\n   *\n   * ```\n   * {\n   * \t path: 'path/to/file.js:127:14'\n   *   file: 'path/to/file.js',\n   *   line: 127,\n   *   column: 14\n   * }\n   * ```\n   *\n   * If a stacktrace is unavailable for any reason, the array will contain a\n   * single element like:\n   *\n   * ```js\n   * {\n   *   path: 'unknown',\n   *   file: 'unknown',\n   *   line: 0,\n   *   column: 0\n   * }\n   * ```\n   */\n  stack: NGN.get(function () {\n    var me = this;\n    var originalStack = new Error().stack.split('\\n');\n    var stack = new Error().stack.split('\\n') || [];\n\n    stack = stack.filter(function (item) {\n      return item.split(':').length > 1;\n    }).map(function (item) {\n      item = item.replace(/^.*\\s\\(/i, '').replace(/\\)/gi, '').replace(/^.*\\@/i, '').replace(window !== undefined ? window.location.origin : process !== undefined ? process.cwd() : '', '').replace(/^.*\\:\\/\\//, '').replace(/\\s{1,100}at\\s{1,100}/gi, '').replace(/anonymous\\>/, 'console').trim().split(':');\n\n      return {\n        path: item[0].substr(me.nodelike ? 0 : 1, item[0].length - (me.nodelike ? 0 : 1)) + ':' + item[1] + ':' + item[2],\n        file: item[0].substr(me.nodelike ? 0 : 1, item[0].length - (me.nodelike ? 0 : 1)),\n        line: parseInt(item[1], 10),\n        column: parseInt(item[2], 10)\n      };\n    });\n\n    if (stack.length === 0) {\n      return [{\n        path: 'unknown',\n        file: 'unknown',\n        line: 0,\n        column: 0\n      }];\n    } else if (me.nodelike) {\n      stack.reverse();\n    }\n\n    return stack;\n  }),\n\n  /**\n   * @property css\n   * A CSS string used for highlighting console output in Chrome and Firefox.\n   *\n   * **Example:**\n   *\n   * ```js\n   * console.log('%cHighlight %c some text and leave the rest normal.', NGN.css, '')\n   * ```\n   * @private\n   */\n  css: NGN.privateconst('font-weight: bold;')\n});\n\n'use strict';\n\nObject.defineProperty(NGN, 'global', NGN.privateconst(NGN.nodelike ? global : window));\n\n// Force scope\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.body.classList.add('ngn');\n});\n\n'use strict';\n\nif (!window.NGN) {\n  throw new Error('The EventEmitter class is dependent on the presence of NGN.');\n}\n\n/**\n * @class EventEmitter\n * This is an extendable generic class used to apply event management\n * to non-DOM objects, such as data models, logging, and other common\n * elements of JavaScript programming.\n * @protected\n */\n\nvar EventEmitter = function () {\n  /**\n   * @constructor\n   * ```\n   * let EE = new EventEmitter()\n   * ```\n   * This is a protected class. It is most commonly instantiated through\n   * the NGN namespace (i.e. `new NGN.EventEmitter()`). However; it is\n   * designed for use within the NGN library, not directly as an event emitter.\n   * Use with caution.\n   */\n\n  function EventEmitter(cfg) {\n    _classCallCheck(this, EventEmitter);\n\n    cfg = cfg || {};\n    Object.defineProperties(this, {\n      handlers: NGN.private({}),\n      adhoc: NGN.private({}),\n      maxlisteners: NGN.private(cfg.defaultMaxListeners || 10)\n    });\n  }\n\n  /**\n   * @property {object} subscribers\n   * An array of all subscribers which currently have a registered event handler.\n   * @warning This is a UI-only method.\n   */\n\n\n  _createClass(EventEmitter, [{\n    key: 'listenerCount',\n\n\n    /**\n     * @method {number} listenerCount\n     * The number of listeners for a specific event.\n     * @param {string} eventName\n     * The name of the event to count listeners for.\n     */\n    value: function listenerCount(eventName) {\n      return (this.handlers[eventName] || []).length + (this.adhoc[eventName] || []).length;\n    }\n\n    /**\n     * @method getMaxListeners\n     * A node-like reference to the #defaultMaxListeners value.\n     * @return {number}\n     */\n\n  }, {\n    key: 'getMaxListeners',\n    value: function getMaxListeners() {\n      return this.defaultMaxListeners;\n    }\n\n    /**\n     * @method setMaxListeners\n     * A node-like reference to the #defaultMaxListeners value (setter).\n     */\n\n  }, {\n    key: 'setMaxListeners',\n    value: function setMaxListeners(value) {\n      this.defaultMaxListeners = value;\n    }\n\n    /**\n     * @method eventNames\n     * A node-like reference providing an array of recognized event names.\n     * @return {array}\n     */\n\n  }, {\n    key: 'eventNames',\n    value: function eventNames() {\n      var handlers = Object.keys(this.handlers);\n      var adhoc = Object.keys(this.adhoc);\n      return NGN.dedupe(handlers.concat(adhoc));\n    }\n\n    /**\n     * @method listeners\n     * Returns the raw listener methods for the event.\n     * @param {string} eventName\n     * Name of the event to retrieve listeners for.\n     * @return {array}\n     */\n\n  }, {\n    key: 'listeners',\n    value: function listeners(eventName) {\n      var handlers = this.handlers[eventName] || [];\n      var adhoc = this.adhoc[eventName] || [];\n      return handlers.concat(adhoc);\n    }\n\n    /**\n     * @method on\n     * Create a new event handler for the specified event.\n     * @param  {string} eventName\n     * Name of the event to listen for.\n     * @param  {Function} handler\n     * The method responsible for responding to the event.\n     * @param {boolean} [prepend=false]\n     * When set to `true`, the event is added to the beginning of\n     * the processing list instead of the end.\n     */\n\n  }, {\n    key: 'on',\n    value: function on(eventName, callback, prepend) {\n      this.handlers[eventName] = this.handlers[eventName] || [];\n      this.handlers[eventName][NGN.coalesce(prepend, false) ? 'unshift' : 'push'](callback);\n      this.emit('newListener', eventName, callback);\n      if (this.listenerCount(eventName) > this.maxlisteners) {\n        throw new Error('Maximum event listeners exceeded. Use setMaxListeners() to adjust the level.');\n      }\n    }\n\n    /**\n     * @method addListener\n     * A node-like reference to the #on method.\n     */\n\n  }, {\n    key: 'addListener',\n    value: function addListener() {\n      this.on.apply(this, arguments);\n    }\n\n    /**\n     * @method prependListener\n     * A node-like reference to the #on method, adding events to the\n     * beginning of the event list (processed before others) instead of the end.\n     * @param  {string} eventName\n     * Name of the event to listen for.\n     * @param  {Function} handler\n     * The method responsible for responding to the event.\n     */\n\n  }, {\n    key: 'prependListener',\n    value: function prependListener() {\n      var args = NGN.slice(arguments).push(true);\n      this.on.apply(this, args);\n    }\n\n    /**\n     * @method on\n     * Create a new event handler for the specified event. The\n     * handler will be removed immediately after it is executed. This\n     * effectively listens for an event to happen once and only once\n     * before the handler is destroyed.\n     * @param  {string} eventName\n     * Name of the event to listen for.\n     * @param  {Function} handler\n     * The method responsible for responding to the event.\n     * @param {boolean} [prepend=false]\n     * When set to `true`, the event is added to the beginning of\n     * the processing list instead of the end.\n     */\n\n  }, {\n    key: 'once',\n    value: function once(eventName, callback, prepend) {\n      this.adhoc[eventName] = this.adhoc[eventName] || [];\n      this.adhoc[eventName][NGN.coalesce(prepend, false) ? 'unshift' : 'push'](callback);\n      this.emit('newListener', eventName, callback);\n      if (this.listenerCount(eventName) > this.maxlisteners) {\n        throw new Error('Maximum event listeners exceeded. Use setMaxListeners() to adjust the level.');\n      }\n    }\n\n    /**\n     * @method prependOnceListener\n     * A node-like reference to the #once method, adding events to the\n     * beginning of the event list (processed before others) instead of the end.\n     * @param  {string} eventName\n     * Name of the event to listen for.\n     * @param  {Function} handler\n     * The method responsible for responding to the event.\n     */\n\n  }, {\n    key: 'prependOnceListener',\n    value: function prependOnceListener() {\n      var args = NGN.slice(arguments).push(true);\n      this.once.apply(this, args);\n    }\n\n    /**\n     * @method off\n     * Remove an event handler. If no handler is specified, all handlers for\n     * the specified event will be removed.\n     * @param {string} eventName\n     * Name of the event to remove.\n     * @param {function} [handlerFn]\n     * The handler function to remove from the event handlers.\n     */\n\n  }, {\n    key: 'off',\n    value: function off(eventName, handlerFn) {\n      this.deleteEventHandler('handlers', eventName, handlerFn);\n    }\n\n    /**\n     * @method onceoff\n     * Remove an event handler that was originally created using #once. If no\n     * handler is specified, all handlers for the spcified event will be removed.\n     * @param {string} eventName\n     * Name of the event to remove.\n     * @param {function} handlerFn\n     * The handler function to remove from the event handlers.\n     */\n\n  }, {\n    key: 'onceoff',\n    value: function onceoff(eventName, handlerFn) {\n      this.deleteEventHandler('adhoc', eventName, handlerFn);\n    }\n\n    /**\n     * @method deleteEventHandler\n     * Remove a specific event handler.\n     * @param {string} type\n     * Either `handler` (multi-use events) or `adhoc` (one-time events)\n     * @param {string} eventName\n     * Name of the event to remove.\n     * @param {function} handlerFn\n     * The handler function to remove from the event handlers.\n     * @private\n     */\n\n  }, {\n    key: 'deleteEventHandler',\n    value: function deleteEventHandler(type, eventName, handlerFn) {\n      var scope = this[type];\n\n      if (scope[eventName]) {\n        var _ret = function () {\n          if (!handlerFn) {\n            delete scope[eventName];\n            return {\n              v: void 0\n            };\n          }\n\n          var result = [];\n          scope[eventName].forEach(function (handler) {\n            if (handler.toString() !== handlerFn.toString()) {\n              result.push(handler);\n            }\n          });\n\n          if (result.length === 0) {\n            delete scope[eventName];\n            return {\n              v: void 0\n            };\n          }\n\n          scope[eventName] = result;\n        }();\n\n        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n      }\n    }\n\n    /**\n     * @alias removeListener\n     * A node-like alias of the #off and #onceoff method (combined).\n     */\n\n  }, {\n    key: 'removeListener',\n    value: function removeListener() {\n      this.off.apply(this, arguments);\n      this.onceoff.apply(this, arguments);\n    }\n\n    /**\n     * @method clear\n     * Remove all event handlers from the EventEmitter (both regular and adhoc).\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      var _this = this;\n\n      if (arguments.length > 0) {\n        NGN.slice(arguments).forEach(function (eventName) {\n          delete _this.handlers[eventName];\n          delete _this.adhoc[eventName];\n        });\n      } else {\n        this.handlers = {};\n        this.adhoc = {};\n      }\n    }\n\n    /**\n     * @alias removeAllListeners\n     * A node-like alias of the #clear method.\n     */\n\n  }, {\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      this.clear.apply(this, arguments);\n    }\n\n    /**\n     * @method emit\n     * Fires an event. This method accepts one or more arguments. The\n     * first argument is always the event name, followed by any number\n     * of payload arguments.\n     *\n     * Example:\n     * ```\n     * const EE = new NGN.EventEmitter()\n     *\n     * EE.emit('someevent', {payload: 1}, {payload: 2})\n     * ```\n     * The example above triggers an event called `someevent` and applies\n     * the remaining two arguments to any event handlers.\n     * @param {string} eventName\n     * The name of the event to trigger.\n     */\n\n  }, {\n    key: 'emit',\n    value: function emit() {\n      var args = NGN.slice(arguments);\n      var eventName = args.shift();\n      var events = this.getAllEvents(eventName);\n\n      var scope = {\n        event: eventName\n      };\n\n      for (var name in events) {\n        var adhocEvent = this.adhoc[events[name]];\n        // Adhoc event handling\n        if (adhocEvent) {\n          delete this.adhoc[events[name]];\n\n          while (adhocEvent.length > 0) {\n            var fn = adhocEvent.pop();\n            scope.handler = fn;\n            fn.apply(scope, args);\n          }\n        }\n\n        // Regular event handling\n        var handler = this.handlers[events[name]];\n        if (handler) {\n          for (var _fn in handler) {\n            scope.handler = handler[_fn];\n            handler[_fn].apply(scope, args);\n          }\n        }\n      }\n    }\n\n    /**\n     * @method getAllEvents\n     * Returns all of the events that match an event name. The event name\n     * may contain wildcards (i.e. `*`) or it can be a regular expression.\n     * @param  {string|regexp} eventName\n     * A string or regular expression defining which event names to identify.\n     * A string value containing an asterisk (*) will be converted to a regular\n     * expression for simplistic wildcard event handling purposes.\n     * @return {array}\n     * An array of unique event names with handlers or adhoc handlers.\n     * @private\n     */\n\n  }, {\n    key: 'getAllEvents',\n    value: function getAllEvents(eventName) {\n      var regularEvents = Object.keys(this.handlers);\n      var adhocEvents = Object.keys(this.adhoc);\n      var allEvents = NGN.dedupe(regularEvents.concat(adhocEvents));\n\n      allEvents = allEvents.filter(function (event) {\n        // If the event is an exact match, don't filter it out.\n        if (event === eventName) {\n          return true;\n        }\n\n        // If the event is a regexp/wildcard, further processing is necessary.\n        if (NGN.typeof(event) === 'regexp' || event.indexOf('*') >= 0) {\n          // Convert wildcard events to a regular expression.\n          if (NGN.typeof(event) !== 'regexp') {\n            event = new RegExp(event.replace('*', '.*', 'gi'));\n          }\n          // If the event name matches the event, keep it.\n          return event.test(eventName);\n        }\n\n        // None of the criteria were met. Ignore the event.\n        return false;\n      });\n\n      return allEvents;\n    }\n  }, {\n    key: 'subscribers',\n    get: function get() {\n      var subscriberList = {};\n\n      for (var eventName in this.handlers) {\n        subscriberList[eventName] = {\n          handler: this.handlers[eventName].length,\n          adhoc: 0\n        };\n      }\n\n      for (var _eventName in this.adhoc) {\n        subscriberList[_eventName] = subscriberList[_eventName] || {\n          handler: 0\n        };\n\n        subscriberList[_eventName].adhoc = this.adhoc[_eventName].length;\n      }\n\n      return subscriberList;\n    }\n\n    /**\n     * @property defaultMaxListeners\n     * The maximum number of listeners for a single event.\n     */\n\n  }, {\n    key: 'defaultMaxListeners',\n    get: function get() {\n      return this.maxlisteners;\n    },\n    set: function set(value) {\n      this.maxlisteners = value;\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nNGN.extend('EventEmitter', NGN.private(EventEmitter));\n\n'use strict';\n\n/**\n * @class NGN.EventEmitter\n * @inheritdoc\n */\nNGN.inherit(Object.defineProperties({}, {\n  queued: NGN.private({}),\n\n  /**\n   * @method pool\n   * A helper command to create multiple related subscribers\n   * all at once. This is a convenience function.\n   * @property {string} [prefix]\n   * Supply a prefix to be added to every event. For example,\n   * `myScope.` would turn `someEvent` into `myScope.someEvent`.\n   * @property {Object} subscriberObject\n   * A key:value object where the key is the name of the\n   * unprefixed event and the key is the handler function.\n   * @property {Function} [callback]\n   * A callback to run after the entire pool is registered. Receives\n   * a single {Object} argument containing all of the subscribers for\n   * each event registered within the pool.\n   */\n  pool: NGN.const(function (prefix, group, callback) {\n    if (typeof prefix !== 'string') {\n      group = prefix;\n      prefix = '';\n    }\n\n    var pool = {};\n\n    for (var eventName in group) {\n      var topic = (prefix.trim() || '') + eventName;\n      if (typeof group[eventName] === 'function') {\n        pool[eventName] = this.on(topic, group[eventName]);\n      } else {\n        console.warn('%c' + topic + '%c could not be pooled in the event emitter because it\\'s value is not a function.', NGN.css, '');\n      }\n    }\n    if (callback) {\n      callback(pool);\n    }\n  }),\n\n  /**\n   * @method attach\n   * Attach a function to a topic. This can be used\n   * to forward events in response to asynchronous functions.\n   *\n   * For example:\n   *\n   * ```js\n   * myAsyncDataFetch(NGN.BUS.attach('topicName'))\n   * ```\n   *\n   * This is the same as:\n   *\n   * ```js\n   * myAsyncCall(function(data){\n   *  NGN.BUS.emit('topicName', data)\n   * })\n   * ```\n   * @param {string} eventName\n   * The name of the event to attach a handler method to.\n   * @param {boolean} [preventDefaultAction=false]\n   * Setting this to `true` will execute a `event.preventDefault()` before\n   * attaching the handler.\n   * @returns {function}\n   * Returns a function that will automatically be associated with an event.\n   */\n  attach: NGN.const(function (eventName, preventDefaultAction) {\n    var me = this;\n    preventDefaultAction = NGN.coalesce(preventDefaultAction, false);\n\n    return function (e) {\n      if (preventDefaultAction && e.hasOwnProperty('preventDefault')) {\n        e.preventDefault();\n      }\n      var args = NGN.slice(arguments); //NGN.slice(arguments)\n      args.unshift(eventName);\n      me.emit.apply(me, args);\n    };\n  }),\n\n  /**\n   * @method bind\n   * A special subscriber that fires one or more event in response to\n   * to an event. This is used to bubble events up/down an event chain.\n   *\n   * For example:\n   *\n   * ```js\n   * BUS.bind('sourceEvent', ['someEvent','anotherEvent'], {payload:true})\n   * ```\n   * When `sourceEvent` is published, the bind method triggers `someEvent` and\n   * `anotherEvent`, passing the payload object to `someEvent` and\n   * `anotherEvent` subscribers simultaneously.\n   *\n   * @param {String} sourceEvent\n   * The event to subscribe to.\n   * @param {String|Array} triggeredEvent\n   * An event or array of events to fire in response to the sourceEvent.\n   * @param {any} data\n   * Optional data to pass to each bound event handler.\n   * @returns {Object}\n   * Returns an object with a single `remove()` method.\n   */\n  bind: NGN.const(function (eventName, triggers, payload) {\n    triggers = typeof triggers === 'string' ? [triggers] : triggers;\n\n    var me = this;\n    var listener = function listener() {\n      var args = NGN.slice(arguments);\n\n      if (payload) {\n        args.push(payload);\n      }\n\n      for (var trigger in triggers) {\n        var argList = args.slice();\n        argList.unshift(triggers[trigger]);\n        me.emit.apply(me, argList);\n      }\n    };\n\n    this.on(eventName, listener);\n\n    // Provide handle back for removal of topic\n    return {\n      remove: function remove() {\n        me.off(eventName, listener);\n      }\n    };\n  }),\n\n  /**\n   * @method queue\n   * This method waits for the specified duration, then publishes an\n   * event once. This will publish the event only once at the end of the\n   * wait period, even if the event is triggered multiple times. This can\n   * be useful when working with many events triggered in rapid succession.\n   *\n   * For example, an NGN.DATA.Model representing a person may be used to\n   * track a user profile. The NGN.DATA.Model fires an event called `field.update`\n   * every time a data field is modified. In many cases, a user may update\n   * multiple fields of their profile using a form with a \"Save\" button.\n   * Instead of generating a new \"save\" (to disk, to memory, to an API, etc)\n   * operation for each field, the publishOnce event can wait until all\n   * changes are made before running the save operation.\n   *\n   * ```js\n   * // Create a data model representing a person.\n   * var Person = new NGN.DATA.Model({....})\n   *\n   * // Create a new person record for a user.\n   * var user = new Person()\n   *\n   * // When the user is modified, save the data.\n   * user.on('field.update', function () {\n   * \t // Wait 300 milliseconds to trigger the save event\n   *   NGN.BUS.queue('user.save', 300)\n   * })\n   *\n   * // Save the user using an API\n   * NGN.BUS.on('user.save', function () {\n   * \t NGN.HTTP.put({\n   * \t   url: 'https://my.api.com/user',\n   * \t   json: user.data\n   * \t })\n   * })\n   *\n   * // Modify the record attributes (which are blank by default)\n   * user.firstname = 'John'\n   * user.lastname = 'Doe'\n   * user.age = 42\n   *\n   * // Make another update 1 second later\n   * setTimeout(function () {\n   *   user.age = 32\n   * }, 1000)\n   * ```\n   *\n   * The code above sets up a model and record. Then it listens to the record\n   * for field updates. Each time it recognizes an update, it queues the \"save\"\n   * event. When the queue matures, it fires the `user.save` event.\n   *\n   * The first `field.update` is triggered when `user.firstname = 'John'` runs.\n   * This initiates a queue for `user.save`, set to mature in 300 millisenconds.\n   * Next, a `field.update` is triggered when `user.lastname = 'Doe'` runs.\n   * This time, since the queue for `user.save` is already initiated, notthing\n   * new happens. Finally, a `field.update` is triggered when `user.age = 42`\n   * runs. Just like the last one, nothing happens since the `user.save` queue\n   * is already active.\n   *\n   * The `user.save` queue \"matures\" after 300 milliseconds. This means after\n   * 300 milliseconds have elapsed, the `user.save` event is triggered. In this\n   * example, it means the `NGN.HTTP.put()` code will be executed. As a result,\n   * all 3 change (firstname, lastname, and age) will be complete before the\n   * API request is executed. The queue is cleared immediately.\n   *\n   * The final update occurs 1 second later (700 milliseconds after the queue\n   * matures). This triggers a `field.update`, but since the queue is no\n   * longer active, it is re-initiated. 300 milliseconds later, the `user.save`\n   * event is fired again, thus executing the API request again (1.3 seconds\n   * in total).\n   * @param {string} eventName\n   * The event/topic to publish/emit.\n   * @param {Number} [delay=300]\n   * The number of milliseconds to wait before firing the event.\n   * @param {Any} [payload]\n   * An optional payload, such as data to be passed to an event handler.\n   */\n  queue: NGN.const(function (eventName, delay) {\n    var _this2 = this,\n        _arguments = arguments;\n\n    if (!this.queued.hasOwnProperty(eventName)) {\n      (function () {\n        var me = _this2;\n        var args = NGN.slice(_arguments);\n        args.splice(1, 1);\n\n        _this2.queued[eventName] = setTimeout(function () {\n          delete me.queued[eventName];\n          me.emit.apply(me, args);\n        }, delay);\n      })();\n    }\n  })\n}), NGN.EventEmitter);\n\n'use strict';\n\nvar CustomException = function (_Error) {\n  _inherits(CustomException, _Error);\n\n  // eslint-disable-line\n\n  function CustomException(config) {\n    _classCallCheck(this, CustomException);\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(CustomException).call(this));\n\n    config = config || {};\n    config = typeof config === 'string' ? { message: config } : config;\n    config.custom = config.custom || {};\n\n    var me = _this3;\n\n    _this3.name = config.name || 'NgnError';\n    _this3.type = config.type || 'TypeError';\n    _this3.severity = config.severity || 'minor';\n    _this3.message = config.message || 'Unknown Error';\n    _this3.category = config.category || 'operational'; // Alternative is \"programmer\"\n\n    // Cleanup name\n    _this3.name = _this3.name.replace(/[^a-zA-Z0-9_]/gi, '');\n\n    // Add any custom properties\n    for (var attr in config.custom) {\n      if (config.custom.hasOwnProperty(attr)) {\n        _this3[attr] = config.custom[attr];\n      }\n    }\n    _this3.hasOwnProperty('custom') && delete _this3.custom;\n\n    if (NGN.nodelike || Error.prepareStackTrace) {\n      //   console.log('++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++')\n      // Capture the stack trace on a new error so the detail can be saved as a structured trace.\n      Error.prepareStackTrace = function (_, stack) {\n        return stack;\n      };\n\n      var _err = new Error();\n      Error.captureStackTrace(_err, _this3);\n\n      _this3.rawstack = _err.stack;\n\n      Error.prepareStackTrace = function (err, stack) {\n        // eslint-disable-line handle-callback-err\n        me.cause && console.warn(me.cause);\n        me.help && console.info(me.help);\n\n        return me.name + ': ' + me.message + '\\n' + stack.filter(function (frame) {\n          return frame.getFileName() !== __filename && frame.getFileName();\n        }).map(function (el) {\n          return '    at ' + el;\n        }).join('\\n');\n      };\n\n      // Enable stack trace\n      Error.captureStackTrace(_this3);\n    }\n    return _this3;\n  }\n\n  /*\n   * @property {Array} trace\n   * The structured data of the stacktrace. Each array element is a JSON object corresponding to\n   * the full stack trace:\n   *\n   * ```js\n   * {\n   *   filename: String,\n   *   line: Number,\n   *   column: Number,\n   *   functionname: String,\n   *   native: Boolean,\n   *   eval: Boolean,\n   *   type: String\n   * }\n   * ```\n   * @readonly\n   */\n\n\n  _createClass(CustomException, [{\n    key: 'trace',\n    get: function get() {\n      return this.rawstack.filter(function (frame) {\n        return frame.getFileName() !== __filename && frame.getFileName();\n      }).map(function (frame) {\n        return {\n          filename: frame.getFileName(),\n          line: frame.getLineNumber(),\n          column: frame.getColumnNumber(),\n          functionname: frame.getFunctionName(),\n          native: frame.isNative(),\n          eval: frame.isEval(),\n          type: frame.getTypeName()\n        };\n      });\n    }\n  }]);\n\n  return CustomException;\n}(Error);\n\nif (NGN.nodelike) {\n  module.exports = CustomException;\n}\n\n'use strict';\n\n/**\n * @class NGN\n * @inheritdoc\n */\n/**\n * @method createException\n * Create a custom global exception.\n * For more information, see the [Custom Exceptions Guide](#!/guide/customerrors).\n * @param {Object} config\n * The configuration of the new error.\n * @param {String} [config.name=NgnError]\n * The pretty name of the exception. Alphanumeric characters only (underscore is acceptable).\n * @param {String} [config.type=TypeError]\n * The type of error. This is commonly `TypeError` or `ReferenceError`, but\n * it can be any custom value.\n * @param {String} [config.severity=minor]\n * A descriptive \"level\" indicating how critical the error is.\n * @param {String} [config.message=Unknown Error]\n * The default message to output when none is specified.\n * @param {Object} [config.custom]\n * Provide a key/value object of custom attributes for the error.\n * There are two \"special\" custom attributes: `help` and `cause`.\n * When provided, these will be written to stdout whenever the error's\n * stack is viewed.\n *\n * For example:\n *\n * ```js\n * require('ngn')\n *\n * NGN.createException({\n *   name: 'Test Problem',\n *   message: 'An example error.',\n *   custom: {\n *     help: 'Remove the throw statement.',\n *     cause: 'Testing the error output.'\n *   }\n * });\n *\n * throw TestProblem()\n * ```\n * The code above generates the following console output:\n *\n * ```sh\n * Testing the error output.\n * Remove the throw statement.\n * /path/to/test.js:12\n *    throw TestProblem();\n *    ^\n *\n * TestProblem: An example error.\n *    at null._onTimeout (/path/to/test.js:12:11)\n *    at Timer.listOnTimeout (timers.js:92:15)\n * ```\n */\nNGN.extend('createException', NGN.public(function (config) {\n  config = config || {};\n  config = typeof config === 'string' ? { message: config } : config;\n  config.name = config.name || 'NgnError';\n  config.name = config.name.replace(/[^a-zA-Z0-9_]/gi, '');\n\n  // Create the error as a function\n  NGN.global[config.name] = function () {\n    if (arguments.length > 0) {\n      config.message = arguments[0];\n    }\n    return new CustomException(config);\n  };\n}));\n\n/**\n * @class DOM\n * A utility class to simplify some DOM management tasks.\n */\nNGN.DOM = {};\n\nObject.defineProperties(NGN.DOM, {\n  /**\n   * @method ready\n   * Executes code after the DOM is loaded.\n   * @param {function} callback\n   * The function to call when the DOM is fully loaded.\n   */\n  ready: NGN.const(function (callback) {\n    document.addEventListener('DOMContentLoaded', callback);\n  }),\n\n  /**\n   * @method destroy\n   * Remove a DOM element.\n   * @param {HTMLElement|NodeList|String|Array} node\n   * Accepts a single `HTMLElement`, a `NodeList`, a CSS selector, or\n   * an array of `HTMLElements`/`NodeList`/CSS Selectors.\n   */\n  destroy: NGN.const(function (element) {\n    // Process a CSS selector\n    if (typeof element === 'string') {\n      var str = element;\n      element = document.querySelectorAll(element);\n\n      if (element.length === 0) {\n        console.warn('The \\\"' + str + '\\\" selector did not return any elements.');\n        return;\n      }\n      // Iterate through results and remove each element.\n      NGN.slice(element).forEach(this.destroy);\n    } else {\n      switch (NGN.typeof(element)) {\n        case 'array':\n          element.forEach(this.destroy);\n          return;\n        case 'nodelist':\n          NGN.slice(element).forEach(this.destroy);\n          return;\n        case 'htmlelement':\n          element.parentNode.removeChild(element);\n          return;\n        default:\n          if (/^html.*element$/.test(NGN.typeof(element))) {\n            element.parentNode.removeChild(element);\n            return;\n          }\n          console.warn('An unknown error occurred while trying to remove DOM elements.');\n          console.log('Unknown Element', element);\n      }\n    }\n  }),\n\n  /**\n   * @method findParent\n   * Find a distant parent of a DOM element. This can be thought\n   * of as a reverse CSS selector that traverses UP the DOM chain\n   * to find the parent element.\n   *\n   * For example:\n   *\n   * Assume the following HTML structure & JS code:\n   *\n   * ```html\n   * <section>\n   *   <header class=\"MyGroup\">\n   *     <div>\n   *       <div>\n   *         <button>Delete Entire Group</button>\n   *       </div>\n   *     </div>\n   *   </header>\n   * </section>\n   * ```\n   *\n   * ```js\n   * ref.find('button.remove').addEventListener('click', function (event) {\n   *   event.preventDefault()\n   *   let removeButton = event.currentTarget\n   *   let group = ref.findParent(removeButton,'header')\n   *   ref.destroy(group)\n   * })\n   * ```\n   *\n   * The code above listens for a click on the button. When the button\n   * is clicked, the `findPerent` method recognizes the \"Delete Entire Group\"\n   * button and traverses UP the DOM chain until it finds a `header` DOM\n   * element. The `header` DOM element is returned (as `group` letiable). The\n   * group is then removed using the `ref.destroy` method.\n   *\n   * Alternatively, the same effect could have been achieved if line 4\n   * of the JS code was:\n   * ```js\n   * let group = ref.findParent(removeButton, '.MyGroup')\n   * ```\n   * @param {HTMLElement|String} element\n   * The DOM element or a CSS selector string identifying the\n   * element whose parent should be found.\n   * @param {String} selector\n   * A minimal CSS selector used to identify the parent.\n   * @param {Number} maxDepth\n   * The maximum number of elements to traverse. This can be used to\n   * cap a selector and force it to fail before reaching a known limit.\n   * By default, there is no limit (i.e. maxDepth=null).\n   * @returns {HTMLElement}\n   * Responds with the DOM Element, or `null` if none was found.\n   */\n  findParent: NGN.const(function (node, selector, maxDepth) {\n    if (typeof node === 'string') {\n      node = document.querySelectorAll(node);\n      if (node.length === 0) {\n        console.warn('\\\"' + node + '\\\" is an invalid CSS selector (Does not identify any DOM elements).');\n        return null;\n      }\n      node = node[0];\n    }\n\n    var currentNode = node.parentNode;\n    var i = 0;\n    maxDepth = typeof maxDepth === 'number' ? maxDepth : -1;\n\n    while (currentNode.parentNode.querySelector(selector) === null && currentNode.nodeName !== 'BODY') {\n      i++;\n      if (maxDepth > 0 && i > maxDepth) {\n        return null;\n      }\n      currentNode = currentNode.parentNode;\n    }\n\n    return currentNode;\n  }),\n\n  /**\n   * @method indexOfParent\n   * Returns the zero-based index of the DOM element related\n   * to its parent element.\n   * For example:\n   *\n   * `html\n   * <div>\n   *   <p>...</p>\n   *   <p>...</p>\n   *   <button id=\"btn\"></button>\n   *   <p>...</p>\n   * </div>\n   * ```\n   *\n   * ```js\n   * let i = NGN.DOM.indexOfParent(document.getElementById('btn'))\n   * console.log(i) // 2\n   * ```\n   * @param {HTMLElement} el\n   * The reference element.\n   * @returns {number}\n   */\n  indexOfParent: NGN.const(function (element) {\n    return NGN.slice(element.parentNode.children).indexOf(element);\n  })\n});\n\n/**\n * @class BUS\n * The bus acts as a pub/sub messaging system (as opposed to a queue). It is primarily\n * designed for asynchronous communication between javascript objects, but can also be\n * bound to DOM events.\n *\n * The most common use looks like:\n * ```js\n *   var subscriber = NGN.BUS.subscribe('test', function () {\n *     console.log('test handled')\n *   })\n *\n *   NGN.BUS.subscribeOnce('test', function () {\n *     console.log('RESPOND ONCE!')\n *   })\n *\n *   NGN.BUS.publish('test') // Outputs \"test handled\" and \"RESPOND ONCE\".\n *\n *   NGN.BUS.publish('test') // Outputs \"test handled\" only.\n *\n *   subscriber.unsubscribe() // Removes the listener\n *\n *   NGN.BUS.publish('test') // Outputs nothing since the subscription was removed.\n * ```\n * There are a few aliases for ease of use, including `on() --> subscribe()`,\n * `once() --> subscribeOnce()`, and `emit() --> publish()`.\n *\n * It is also possible to use a wildcard in a subscription.\n *\n * ```js\n *   var subscriber = NGN.BUS.subscribe('test.*', function () {\n *     console.log('test handled')\n *   })\n *   var subscriber = NGN.BUS.subscribe('test.create', function () {\n *     console.log('test create handled')\n *   })\n *\n *   NGN.BUS.publish('test.create') // Outputs \"test handled\" and \"test create handled\"\n *\n *   NGN.BUS.publish('test.delete') // Outputs \"test handled\"\n * ```\n * @singleton\n */\nNGN.extend('BUS', NGN.const(new NGN.EventEmitter()));\n\n/**\n * @class NGN.ref\n * A global \"pointer\" to DOM elements. This is used to reference and manipulate\n * DOM elements in a simple and standard way, without restricting native functionality.\n */\n'use strict';\n\nNGN.ref = new function () {\n  var requireBUS = function requireBUS(trigger, event, scope, nm, preventDefault) {\n    if (NGN.BUS === undefined) {\n      return console.error('The event BUS is required for ' + nm + '().');\n    }\n    preventDefault = NGN.coalesce(preventDefault, false);\n    var fn = function fn(e) {\n      if (preventDefault && e.preventDefault) {\n        e.preventDefault();\n      }\n      NGN.BUS.emit(event, e);\n    };\n    scope.addEventListener(trigger, fn);\n  };\n\n  var qs = function qs(value, selector, all) {\n    if (typeof value === 'string') {\n      return document[all ? 'querySelector' : 'querySelectorAll']((value + ' > ' + selector).trim());\n    }\n    return value[all ? 'querySelector' : 'querySelectorAll'](selector.trim());\n  };\n\n  Object.defineProperties(this, {\n\n    keys: NGN.define(false, true, false, {}),\n\n    _find: NGN.define(false, false, false, function (value, selector) {\n      if (typeof value === 'string') {\n        var reference = NGN.ref.find((value + ' > ' + selector).trim());\n        if (reference.length === 0) {\n          var tmpref = NGN.ref.find(value.trim())[0].parentNode.querySelectorAll(selector);\n          if (tmpref.length > 0) {\n            if (tmpref.length === 1) {\n              return tmpref[0];\n            }\n            return tmpref;\n          }\n        }\n        return reference;\n      }\n      return NGN.ref.find(value.querySelectorAll(selector));\n    }),\n\n    /**\n     * @method find\n     * Retrieve the DOM element(s) for the given selector. This method provides\n     * an **unmanaged** reference object.\n     * @private\n     * @param {String} selector\n     * The selector (CSS-style).\n     * @returns {ref}\n     * Returns an instance of the reference.\n     */\n    find: NGN.define(false, false, false, function (value) {\n      var html = typeof value !== 'string';\n      var els = html === false ? document.querySelectorAll(value) : value;\n      var result = null;\n\n      if (els.length === 1) {\n        if (!els[0].hasOwnProperty('isArray')) {\n          Object.defineProperties(els[0], {\n            isArray: NGN.get(function () {\n              return false;\n            }, false)\n          });\n        }\n\n        if (!els[0].hasOwnProperty('find')) {\n          Object.defineProperty(els[0], 'find', NGN.const(function (selector) {\n            return NGN.ref._find(value, selector);\n          }));\n        }\n\n        if (!els[0].hasOwnProperty('forward')) {\n          Object.defineProperty(els[0], 'forward', NGN.const(function (trigger, event) {\n            requireBUS(trigger, event, this, 'forward');\n          }));\n        }\n\n        if (!els[0].hasOwnProperty('on')) {\n          Object.defineProperty(els[0], 'on', NGN.const(function () {\n            this.addEventListener.apply(this, arguments);\n          }));\n        }\n\n        result = els[0];\n      } else {\n        var base = NGN.slice(els);\n        if (NGN.typeof(els) === 'nodelist' && base.length === 1) {\n          base = base[0];\n        }\n\n        // Apply querySelector/All to the response for chaining.\n        Object.defineProperties(base, {\n          querySelector: NGN.define(false, false, false, function (selector) {\n            qs(value, selector);\n          }),\n\n          querySelectorAll: NGN.define(false, false, false, function (selector) {\n            qs(value, selector, true);\n          }),\n\n          addEventListener: NGN.define(false, false, false, function (evt, fn) {\n            for (var el = 0; el < this.length; el++) {\n              this[el].addEventListener(evt, fn);\n            }\n          }),\n\n          removeEventListener: NGN.define(false, false, false, function (evt, fn) {\n            for (var el = 0; el < this.length; el++) {\n              this[el].removeEventListener(evt, fn);\n            }\n          }),\n\n          find: NGN.const(function (selector) {\n            return NGN.ref._find(value, selector);\n          }),\n\n          isArray: NGN.get(function () {\n            return true;\n          }, false),\n\n          forward: NGN.define(false, false, false, function (trigger, event) {\n            requireBUS(trigger, event, this, 'forward');\n          })\n        });\n        result = base;\n      }\n\n      return result;\n    }),\n\n    /**\n     * @method create\n     * Add a reference.\n     * @param {String} [key]\n     * The key/name of the reference. For example, if this is `myElement`,\n     * then `ref.myElement` will return a pointer to this reference.\n     * @param {string} selector\n     * The CSS selector path.\n     */\n    create: NGN.const(function (key, value) {\n      // If the key is not provided but the value is a DOM element, make\n      // an ephemeral reference.\n      if (!value && typeof key !== 'string') {\n        return this.find(key);\n      }\n\n      // Basic error checking\n      if (typeof key !== 'string' && typeof key !== 'number') {\n        throw new Error('Cannot add a non-alphanumeric selector reference.');\n      }\n      if (key.trim().length === 0) {\n        throw new Error('Cannot add a blank selector reference.');\n      }\n      if (value === undefined || value === null || value.trim().length === 0) {\n        throw new Error('Cannot create a null/undefined selector reference.');\n      }\n\n      // Create a reference object\n      var cleankey = this.cleanKey(key);\n      var me = this;\n      Object.defineProperty(NGN.ref, cleankey, NGN.private(value));\n\n      Object.defineProperty(NGN.ref, key, {\n        enumerable: true,\n        get: function get() {\n          return me.find(value);\n        },\n        set: function set(val) {\n          if (val === undefined || val === null || val.trim().length === 0) {\n            throw new Error('Cannot create a null/undefined selector reference.');\n          }\n          NGN.ref[cleankey] = val;\n        }\n      });\n\n      this.keys[key] = value;\n      this.keys[this.cleanKey(key)] = value;\n    }),\n\n    /**\n     * @method remove\n     * Removes a key from the reference manager.\n     */\n    remove: NGN.const(function (key) {\n      if (this[key]) {\n        delete this[key];\n        delete this.keys[key];\n      }\n      var ck = this.cleanKey(key);\n      if (this[ck]) {\n        delete this[ck];\n        delete this.keys[ck];\n      }\n    }),\n\n    /**\n     * @method cleanKey\n     * Creates a clean version of the key used to uniquely identify the reference.\n     * @private\n     * @param {String} key\n     * The key to clean.\n     */\n    cleanKey: NGN.define(false, false, false, function (key) {\n      return key.replace(/[^A-Za-z0-9\\_\\#\\$\\@\\-\\+]/gi, '') + key.length;\n    }),\n\n    /**\n     * @property json\n     * A JSON representation of the managed keys and their associated selectors.\n     * @returns {Object}\n     * A key:selector object.\n     */\n    json: {\n      enumerable: true,\n      get: function get() {\n        var me = this;\n        var obj = {};\n\n        Object.keys(this).forEach(function (el) {\n          if (me.hasOwnProperty(el) && ['json', 'find', 'remove'].indexOf(el.trim().toLowerCase()) < 0 && typeof me[el] !== 'function') {\n            obj[el] = me.keys[el];\n          }\n        });\n        return obj;\n      }\n    }\n  });\n}();\n\n/**\n * @class NGN.NET\n * A library to issue network requests, typically viaHTTP/S requests.\n * This acts as an AJAX library among other things.\n * @author Corey Butler\n * @singleton\n */\nvar parser = new DOMParser();\nvar fs = NGN.nodelike ? require('fs') : null;\n\nvar Network = function () {\n  function Network() {\n    _classCallCheck(this, Network);\n\n    Object.defineProperties(this, {\n      /**\n       * @method xhr\n       * Issue an XHR request.\n       * @private\n       * @param  {Function} callback\n       * The callback to execute when the request finishes (or times out.)\n       */\n      xhr: NGN.privateconst(function (callback) {\n        var res = void 0;\n\n        if (window.XMLHttpRequest) {\n          // code for IE7+, Firefox, Chrome, Opera, Safari\n          res = new XMLHttpRequest();\n        }\n\n        res.onreadystatechange = function () {\n          if (res.readyState === 4) {\n            if (callback) {\n              callback(res);\n            }\n          }\n        };\n\n        return res;\n      }),\n\n      /**\n       * @method run\n       * A wrapper to execute a request.\n       * @private\n       * @param  {string} method required\n       * The method to issue, such as GET, POST, PUT, DELETE, OPTIONS, etc.\n       * @param  {string} url\n       * The URL where the request is issued to.\n       * @param  {Function} callback\n       * A function to call upon completion.\n       */\n      run: NGN.privateconst(function (method, url, callback) {\n        var res = NGN.NET.xhr(callback);\n        res.open(method, url, true);\n        res.send();\n      }),\n\n      /**\n       * @method applyRequestSettings\n       * Apply any configuration details to issue with the request,\n       * such as `username`, `password`, `headers`, etc.\n       * @private\n       * @param {object} xhr\n       * The XHR request object.\n       * @param {object} cfg\n       * The key/value configuration object to apply to the request.\n       * @param {object} cfg.params\n       * A key/value object containing URL paramaters to be passed with the request.\n       * These will automatically be URI-encoded.\n       * @param {object} cfg.headers\n       * A key/value object containing additional headers and associated values to\n       * be passed with the request.\n       * @param {object} cfg.body\n       * An arbitrary body to pass with the request. If no `Content-Type` header is\n       * provided, a `Content-Type: application/textcharset=UTF-8` header is automatically supplied.\n       * This cannot be used with @cfg.json.\n       * @param {object} cfg.json\n       * A JSON object to be sent with the request. It will automatically be\n       * parsed for submission. By default, a `Content-Type: application/json`\n       * header will be applied (this can be overwritten using @cfg.headers).\n       * @param {object} cfg.form\n       * This accepts a key/value object of form elements, or a reference to a <FORM>\n       * HTML element. This automatically adds the appropriate headers.\n       * @param {string} username\n       * A basicauth username to add to the request. This is sent in plain\n       * text, so using SSL to encrypt/protect it is recommended.\n       * @param {string} password\n       * A basicauth password to add to the request. This is sent in plain\n       * text, so using SSL to encrypt/protect it is recommended.\n       * @param {boolean} [withCredentials=false]\n       * indicates whether or not cross-site `Access-Control` requests should be\n       * made using credentials such as cookies or authorization headers.\n       * The default is `false`.\n       */\n      applyRequestSettings: NGN.privateconst(function (xhr, cfg) {\n        if (!xhr || !cfg) {\n          throw new Error('No XHR or configuration object defined.');\n        }\n\n        // Add URL Parameters\n        if (cfg.params) {\n          var parms = Object.keys(cfg.params).map(function (parm) {\n            return parm + '=' + encodeURIComponent(cfg.params[parm]);\n          });\n          cfg.url += '?' + parms.join('&');\n        }\n\n        xhr.open(cfg.method || 'POST', cfg.url, true);\n\n        // Set headers\n        cfg.header = cfg.header || cfg.headers || {};\n        Object.keys(cfg.header).forEach(function (header) {\n          xhr.setRequestHeader(header, cfg.header[header]);\n        });\n\n        // Handle body (Blank, plain text, or JSON)\n        var body = null;\n        if (cfg.json) {\n          if (!cfg.header || cfg.header && !cfg.header['Content-Type']) {\n            xhr.setRequestHeader('Content-Type', 'application/jsoncharset=UTF-8');\n          }\n          body = JSON.stringify(cfg.json).trim();\n        } else if (cfg.body) {\n          if (!cfg.header || cfg.header && !cfg.header['Content-Type']) {\n            xhr.setRequestHeader('Content-Type', 'application/text');\n          }\n          body = cfg.body;\n        } else if (cfg.form) {\n          body = new FormData();\n          Object.keys(cfg.form).forEach(function (el) {\n            body.append(el, cfg.form[el]);\n          });\n        }\n\n        // Handle withCredentials\n        if (cfg.withCredentials) {\n          xhr.withCredentials = cfg.withCredentials;\n        }\n\n        // Handle credentials sent with request\n        if (cfg.username && cfg.password) {\n          // Basic Auth\n          xhr.setRequestHeader('Authorization', 'Basic ' + btoa(cfg.username + ':' + cfg.password));\n        } else if (cfg.accessToken) {\n          // Bearer Auth\n          xhr.setRequestHeader('Authorization', 'Bearer ' + cfg.accessToken);\n        }\n\n        return body;\n      }),\n\n      /**\n       * @method prepend\n       * A helper method to prepend arguments.\n       * @private\n       * @param  {[type]} args [description]\n       * @param  {[type]} el   [description]\n       * @return {[type]}      [description]\n       */\n      prepend: NGN.privateconst(function (args, el) {\n        args = NGN.slice(args);\n        args.unshift(el);\n        return args;\n      }),\n\n      /**\n       * @method getFile\n       * A \"get\" method specifically for node-like environments.\n       * @param {string} url\n       * The URL to issue the request to.\n       * @param {Function} callback\n       * A callback method to run when the request is complete.\n       * This receives the response object as the only argument.\n       * @private\n       */\n      getFile: NGN.privateconst(function (url) {\n        if (fs !== null) {\n          var rsp = {\n            status: fs.existsSync(url.replace('file://', '')) ? 200 : 400\n          };\n          rsp.responseText = rsp.status === 200 ? fs.readFileSync(url.replace('file://', '')).toString() : 'File could not be found.';\n          return rsp;\n        } else {\n          throw new Error(url + ' does not exist or could not be found.');\n        }\n      }),\n\n      /**\n       * @method normalizeUrl\n       * Cleanup a URL.\n       * @private\n       */\n      normalizeUrl: NGN.privateconst(function (url) {\n        var uri = [];\n\n        url.split('/').forEach(function (el) {\n          if (el === '..') {\n            uri.pop();\n          } else if (el !== '.') {\n            uri.push(el);\n          }\n        });\n\n        return uri.join('/').replace(/\\:\\/{3,50}/gi, '://');\n      }),\n\n      /**\n       * @method processImport\n       * A helper class to process imported content and place\n       * it in the DOM accordingly.\n       * @param {string} url\n       * The URL of remote HTML snippet.\n       * @param {HTMLElement} target\n       * The DOM element where the resulting code should be appended.\n       * @param {string} callback\n       * Returns the HTMLElement, which can be directly inserted into the DOM.\n       * @param {HTMLElement} callback.element\n       * The new DOM element/NodeList.\n       * @param {boolean} [before=false]\n       * If set to true, insert before the callback.element.\n       * @private\n       */\n      processImport: NGN.privateconst(function (url, target, callback, before) {\n        before = before !== undefined ? before : false;\n        this.import(url, function (element) {\n          if (typeof element === 'string') {\n            element = document.createTextNode(element);\n          } else if (element.length) {\n            var _ret3 = function () {\n              var out = [];\n              NGN.slice(element).forEach(function (el) {\n                if (before) {\n                  out.push(target.parentNode.insertBefore(el, target));\n                  target = el;\n                } else {\n                  out.push(target.appendChild(el));\n                }\n              });\n              callback && callback(out);\n              return {\n                v: void 0\n              };\n            }();\n\n            if ((typeof _ret3 === 'undefined' ? 'undefined' : _typeof(_ret3)) === \"object\") return _ret3.v;\n          }\n          if (before) {\n            target.parentNode.insertBefore(element, target);\n          } else {\n            target.appendChild(element);\n          }\n          callback && callback(element);\n        });\n      }),\n\n      /**\n       * @method domainRoot\n       * Returns the root (no http/s) of the URL.\n       * @param {string} url\n       * The URL to get the root of.\n       * @private\n       */\n      domainRoot: NGN.privateconst(function (url) {\n        var r = url.search(/^https?\\:\\/\\//) !== -1 ? url.match(/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i, '') : url.match(/^([^\\/?#]+)(?:[\\/?#]|$)/i, '');\n        return r === null || r[1].length < 3 ? window.location.host : r[1];\n      }),\n\n      /**\n       * @method isCrossOrigin\n       * Determine if accessing a URL is considered a cross origin request.\n       * @param {string} url\n       * The URL to identify as a COR.\n       * @returns {boolean}\n       * @private\n       */\n      isCrossOrigin: NGN.privateconst(function (url) {\n        return this.domainRoot(url) !== window.location.host;\n      }),\n\n      /**\n       * @method prelink\n       * A helper method to construct pre-fetch style DOM elements.\n       * This also fires an event when the element is added to the DOM.\n       * @param {string} url\n       * The URL of the operation.\n       * @param {string} rel\n       * The type of operation. For example: `preconnect`.\n       * @param {boolean} [crossorigin]\n       * Set to `true` to identify the request as a cross origin request.\n       * By default, NGN will compare the URL to the current URL in an\n       * attempt to determine if the request is across origins.\n       * @private\n       */\n      prelink: NGN.privateconst(function (url, rel, cor) {\n        if (!document.head) {\n          console.warn('Cannot use a preconnect, predns, etc because there is no HEAD in the HTML document.');\n          return;\n        }\n\n        var p = document.createElement('link');\n        p.rel = rel;\n        p.href = url.trim().toLowerCase().substr(0, 4) !== 'http' ? this.normalizeUrl(window.location.origin + window.location.pathname + url) : url;\n\n        NGN.coalesce(cor, this.isCrossOrigin(url)) && p.setAttribute('crossorigin', 'true');\n        document.head.appendChild(p);\n        NGN.BUS.emit('network.' + rel);\n      }),\n\n      importCache: NGN.private({}),\n\n      createElement: NGN.privateconst(function (str) {\n        return parser.parseFromString(str, 'text/html').querySelector('body').children;\n      }),\n\n      applyData: NGN.privateconst(function (tpl, data, callback) {\n        if (tpl === undefined) {\n          console.warn('Empty template.');\n          callback && callback();\n          return;\n        }\n\n        // Apply data to the template.\n        Object.keys(data).forEach(function (key) {\n          var re = new RegExp('\\{\\{' + key + '\\}\\}', 'gm');\n          tpl = tpl.replace(re, data[key]);\n        });\n\n        // Clear any unused template code\n        tpl = tpl.replace(/(\\{\\{.*\\}\\})/gm, '');\n\n        var el = this.createElement(tpl);\n        callback && callback(el[0]);\n      })\n    });\n  }\n\n  /**\n   * @method send\n   * Send the request via HTTP/S.\n   * @param  {object} cfg\n   * The configuration to use when sending the request. See @applyRequestSettings#cfg\n   * for configuration details.\n   * @param  {Function} callback\n   * A callback to excute upon completion. This receives a standard response\n   * object.\n   */\n\n\n  _createClass(Network, [{\n    key: 'send',\n    value: function send(cfg, callback) {\n      cfg = cfg || {};\n      var res = this.xhr(callback);\n      var body = this.applyRequestSettings(res, cfg);\n      res.send(body);\n    }\n\n    /**\n     * @method get\n     * Issue a `GET` request.\n     * @param {string} url\n     * The URL to issue the request to.\n     * @param {Function} callback\n     * A callback method to run when the request is complete.\n     * This receives the response object as the only argument.\n     */\n\n  }, {\n    key: 'get',\n    value: function get() {\n      if (_typeof(arguments[0]) === 'object') {\n        var cfg = arguments[0];\n        cfg.method = 'GET';\n        cfg.url = typeof arguments[1] === 'string' ? arguments[1] : cfg.url;\n        if (cfg.url.substr(0, 4) && NGN.nodelike) {\n          return arguments[arguments.length - 1](this.getFile(cfg.url));\n        }\n        return this.send(cfg, arguments[arguments.length - 1]);\n      }\n      if (arguments[0].substr(0, 4) === 'file' && NGN.nodelike) {\n        return arguments[arguments.length - 1](this.getFile(arguments[0]));\n      }\n      this.run.apply(this.run, this.prepend(arguments, 'GET'));\n    }\n\n    /**\n     * @method head\n     * Issue a `HEAD` request.\n     * @param {string} url\n     * The URL to issue the request to.\n     * @param {Function} callback\n     * A callback method to run when the request is complete.\n     * This receives the response object as the only argument.\n     */\n\n  }, {\n    key: 'head',\n    value: function head(uri, callback) {\n      if (_typeof(arguments[0]) === 'object') {\n        var cfg = arguments[0];\n        cfg.method = 'HEAD';\n        cfg.url = typeof arguments[1] === 'string' ? arguments[1] : cfg.url;\n        return this.send(cfg, arguments[arguments.length - 1]);\n      }\n      this.run.apply(this.run, this.prepend(arguments, 'HEAD'));\n    }\n\n    /**\n     * @method put\n     * Issue a `PUT` request.\n     * @param  {object} cfg\n     * See the options for @send#cfg\n     * @param  {Function} callback\n     * A callback method to run when the request is complete.\n     * This receives the response object as the only argument.\n     */\n\n  }, {\n    key: 'put',\n    value: function put(cfg, callback) {\n      cfg = cfg || {};\n      cfg.method = 'PUT';\n      cfg.url = cfg.url || window.location;\n      this.send(cfg, callback);\n    }\n\n    /**\n     * @method post\n     * Issue a `POST` request.\n     * @param  {object} cfg\n     * See the options for @send#cfg\n     * @param  {Function} callback\n     * A callback method to run when the request is complete.\n     * This receives the response object as the only argument.\n     */\n\n  }, {\n    key: 'post',\n    value: function post(cfg, callback) {\n      cfg = cfg || {};\n      cfg.method = 'POST';\n      cfg.url = cfg.url || window.location;\n      this.send(cfg, callback);\n    }\n\n    /**\n     * @method delete\n     * Issue a `DELETE` request.\n     * @param {string} url\n     * The URL to issue the request to.\n     * @param {Function} callback\n     * A callback method to run when the request is complete.\n     * This receives the response object as the only argument.\n     */\n\n  }, {\n    key: 'delete',\n    value: function _delete() {\n      this.run.apply(this.run, this.prepend(arguments, 'DELETE'));\n    }\n\n    /**\n     * @method json\n     * This is a shortcut method for creating a `GET` request and\n     * auto-processing the response body into a JSON object.\n     * @param  {string} url\n     * The URL to issue the request to.\n     * @param  {Function} callback\n     * This receives a JSON response object from the server as its only argument.\n     */\n\n  }, {\n    key: 'json',\n    value: function json(cfg, url, callback) {\n      if (typeof cfg === 'string') {\n        callback = url;\n        url = cfg;\n        cfg = null;\n      }\n      if (cfg === null) {\n        this.run('GET', url, function (res) {\n          if (res.status !== 200) {\n            throw Error('Could not retrieve JSON data from ' + url + ' (Status Code: ' + res.status + ').');\n          }\n          try {\n            res.json = JSON.parse(res.responseText);\n          } catch (e) {\n            res.json = null;\n          }\n          callback && callback(res.json);\n        });\n      } else {\n        cfg.url = url;\n        this.get(cfg, function (res) {\n          if (res.status !== 200) {\n            throw Error('Could not retrieve JSON data from ' + url + ' (Status Code: ' + res.status + ').');\n          }\n          try {\n            res.json = JSON.parse(res.responseText);\n          } catch (e) {\n            res.json = null;\n          }\n          callback && callback(res.json);\n        });\n      }\n    }\n\n    /**\n     * @method import\n     * Import a remote HTML fragment.\n     * @param {string|array} url\n     * The URL of remote HTML snippet. If the URL has a `.js` or `.css`\n     * extension, it will automatically be added to the `<head>`.\n     * It is also possible to provide an array of string values. Take\n     * note that the callback may return a different value based on\n     * this input.\n     * @param {string|array} callback\n     * If a **string** is provided as the URL, this returns the HTMLElement,\n     * which can be directly inserted into the DOM. If an **array** is\n     * provided as the URL, the callback will return an array of HTMLElements.\n     * For example:\n     *\n     * ```js\n     * NGN.NET.import([\n     *   '/path/a.html',\n     *   '/path/b.html',\n     *   '/path/a.js'],\n     *    function (elements){\n     *      console.dir(elements)\n     *    }\n     * })\n     *```\n     * The result `elements` array would look like:\n     *\n     * ```js\n     * [\n     *   HTMLElement, // DOM element created for a.html\n     *   HTMLElement, // DOM element created for b.html\n     *   HTMLElement  // DOM element created for a.js (this will be in the <head>)\n     * ]\n     * ```\n     * The last array element is `null`\n     * @param {boolean} [bypassCache=false]\n     * When set to `true`, bypass the cache.\n     * @fires html.import\n     * Returns the HTMLElement/NodeList as an argument to the event handler.\n     */\n\n  }, {\n    key: 'import',\n    value: function _import(url, callback, bypassCache) {\n      var _this4 = this;\n\n      // Support multiple simultaneous imports\n      if (Array.isArray(url)) {\n        var _ret4 = function () {\n          var self = _this4;\n          var out = new Array(url.length);\n          var i = 0;\n          url.forEach(function (uri, num) {\n            self.import(uri, function (el) {\n              out[num] = el;\n              i++;\n            }, bypassCache);\n          });\n          if (callback) {\n            (function () {\n              var int = setInterval(function () {\n                if (i === url.length) {\n                  clearInterval(int);\n                  callback(out);\n                }\n              }, 5);\n            })();\n          }\n          return {\n            v: void 0\n          };\n        }();\n\n        if ((typeof _ret4 === 'undefined' ? 'undefined' : _typeof(_ret4)) === \"object\") return _ret4.v;\n      }\n\n      // Support JS/CSS\n      var ext = null;\n      try {\n        (function () {\n          ext = url.split('/').pop().split('?')[0].split('.').pop().toLowerCase();\n          var s = void 0;\n          if (ext === 'js') {\n            s = document.createElement('script');\n            s.setAttribute('type', 'text/javascript');\n            s.setAttribute('src', url);\n          } else if (ext === 'css') {\n            s = document.createElement('link');\n            s.setAttribute('rel', 'stylesheet');\n            s.setAttribute('type', 'text/css');\n            s.setAttribute('href', url);\n          }\n          s.onload = typeof callback === 'function' ? function () {\n            callback(s);\n          } : function () {};\n          document.getElementsByTagName('head')[0].appendChild(s);\n        })();\n      } catch (e) {}\n\n      if (['js', 'css'].indexOf((ext || '').trim().toLowerCase()) >= 0) {\n        return;\n      }\n\n      bypassCache = typeof bypassCache === 'boolean' ? bypassCache : false;\n\n      // If a local reference is provided, complete the path.\n      if (url.substr(0, 4) !== 'http') {\n        var path = window.location.href.split('/');\n        path.pop();\n        url = path.join('/') + '/' + url;\n      }\n\n      // Use the cache if defined & not bypassed\n      if (!bypassCache && this.importCache.hasOwnProperty(url)) {\n        var doc = this.createElement(this.importCache[url]);\n        callback && callback(doc.length === 1 ? doc[0] : doc);\n        if (window.NGN.BUS) {\n          window.NGN.BUS.emit('html.import', doc.length === 1 ? doc[0] : doc);\n        }\n        // console.warn('Used cached version of '+url)\n        return;\n      }\n\n      // Retrieve the file content\n      var me = this;\n      this.get(url, function (res) {\n        if (res.status !== 200) {\n          return console.warn('Check the file path of the snippet that needs to be imported. ' + url + ' could not be found (' + res.status + ')');\n        }\n\n        var doc = me.createElement(res.responseText);\n        me.importCache[url] = res.responseText;\n\n        if (doc.length === 0) {\n          console.warn(me.normalizeUrl(url) + ' import has no HTML tags.');\n          callback && callback(res.responseText);\n          if (window.NGN.BUS) {\n            window.NGN.BUS.emit('html.import', res.responseText);\n          }\n        } else {\n          var el = doc.length === 1 ? doc[0] : doc;\n          callback && callback(el);\n          if (window.NGN.BUS) {\n            window.NGN.BUS.emit('html.import', el);\n          }\n        }\n      });\n    }\n\n    /**\n     * @method importTo\n     * This helper method uses the #import method to retrieve an HTML\n     * fragment and insert it into the specified DOM element. This is\n     * the equivalent of using results of the #import to retrieve a\n     * snippet, then doing a `target.appendChild(importedElement)`.\n     * @param {string} url\n     * The URL of remote HTML snippet.\n     * @param {HTMLElement} target\n     * The DOM element where the resulting code should be appended.\n     * @param {string} callback\n     * Returns the HTMLElement, which can be directly inserted into the DOM.\n     * @param {HTMLElement} callback.element\n     * The new DOM element/NodeList.\n     */\n\n  }, {\n    key: 'importTo',\n    value: function importTo(url, target, callback) {\n      this.processImport(url, target, callback);\n    }\n\n    /**\n     * @method importBefore\n     * This helper method uses the #import method to retrieve an HTML\n     * fragment and insert it into the DOM before the target element. This is\n     * the equivalent of using results of the #import to retrieve a snippet,\n     * then doing a `target.parentNode.insertBefore(importedElement, target)`.\n     * @param {string} url\n     * The URL of remote HTML snippet.\n     * @param {HTMLElement} target\n     * The DOM element where the resulting code should be appended.\n     * @param {string} callback\n     * Returns the HTMLElement/NodeList, which can be directly inserted into the DOM.\n     * @param {HTMLElement} callback.element\n     * The new DOM element/NodeList.\n     */\n\n  }, {\n    key: 'importBefore',\n    value: function importBefore(url, target, callback) {\n      this.processImport(url, target, callback, true);\n    }\n\n    /**\n     * @method predns\n     * This notifies the browser domains which will be accessed at a later\n     * time. This helps the browser resolve DNS inquiries quickly.\n     * @param {string} domain\n     * The domain to resolve.\n     * @param {boolean} [crossorigin]\n     * Set to `true` to identify the request as a cross origin request.\n     * By default, NGN will compare the URL to the current URL in an\n     * attempt to determine if the request is across origins.\n     * @fires network-dns-prefetch\n     * Fired when a pre-fetched DNS request is issued to the browser.\n     */\n\n  }, {\n    key: 'predns',\n    value: function predns(domain, cor) {\n      this.prelink(window.location.protocol + '//' + domain, 'dns-prefetch', cor);\n    }\n\n    /**\n     * @method preconnect\n     * Tell the browser which remote resources will or may be used in the\n     * future by issuing a `Preconnect`. This will resolve DNS (#predns), make the TCP\n     * handshake, and negotiate TLS (if necessary). This can be done directly\n     * in HTML without JS, but this method allows you to easily preconnect\n     * a resource in response to a user interaction or NGN.BUS activity.\n     * @param {string} url\n     * The URL to preconnect to.\n     * @param {boolean} [crossorigin]\n     * Set to `true` to identify the request as a cross origin request.\n     * By default, NGN will compare the URL to the current URL in an\n     * attempt to determine if the request is across origins.\n     * @fires network.preconnect\n     * Fired when a preconnect is issued to the browser.\n     */\n\n  }, {\n    key: 'preconnect',\n    value: function preconnect(url, cor) {\n      this.prelink(url, 'preconnect', cor);\n    }\n\n    /**\n     * @method prefetch\n     * Fetch a specific resource and cache it.\n     * @param {string} url\n     * URL of the resource to download and cache.\n     * @param {boolean} [crossorigin]\n     * Set to `true` to identify the request as a cross origin request.\n     * By default, NGN will compare the URL to the current URL in an\n     * attempt to determine if the request is across origins.\n     * @fires network.prefetch\n     * Fired when a prefetch is issued to the browser.\n     */\n\n  }, {\n    key: 'prefetch',\n    value: function prefetch(url, cor) {\n      this.prelink(url, 'prefetch', cor);\n    }\n\n    /**\n     * @method subresource\n     * A prioritized version of #prefetch. This should be used\n     * if the asset is required for the current page. Think of this\n     * as \"needed ASAP\". Otherwise, use #prefetch.\n     * @param {string} url\n     * URL of the resource to download and cache.\n     * @param {boolean} [crossorigin]\n     * Set to `true` to identify the request as a cross origin request.\n     * By default, NGN will compare the URL to the current URL in an\n     * attempt to determine if the request is across origins.\n     * @fires network.prefetch\n     * Fired when a prefetch is issued to the browser.\n     */\n\n  }, {\n    key: 'subresource',\n    value: function subresource(url, cor) {\n      this.prelink(url, 'subresource', cor);\n    }\n\n    /**\n     * @method prerender\n     * Prerender an entire page. This behaves as though a page is\n     * opened in a hidden tab, then displayed when called. This is\n     * powerful, but should only be used when there is absolute\n     * certainty that the prerendered page will be needed. Otherwise\n     * all of the assets are loaded for no reason (i.e. uselessly\n     * consuming bandwidth).\n     * @param {string} url\n     * URL of the page to download and cache.\n     * @param {boolean} [crossorigin]\n     * Set to `true` to identify the request as a cross origin request.\n     * By default, NGN will compare the URL to the current URL in an\n     * attempt to determine if the request is across origins.\n     * @fires network.prerender\n     * Fired when a prerender is issued to the browser.\n     */\n\n  }, {\n    key: 'prerender',\n    value: function prerender(url, cor) {\n      this.prelink(url, 'prerender', cor);\n    }\n\n    /**\n     * @method template\n     * Include a simple letiable replacement template and apply\n     * values to it. This is always cached client side.\n     * @param {string} url\n     * URL of the template to retrieve.\n     * @param {object} [letiables]\n     * A key/value objct containing letiables to replace in\n     * the template.\n     * @param {function} callback\n     * The callback receives a single argument with the HTMLElement/\n     * NodeList generated by the template.\n     */\n\n  }, {\n    key: 'template',\n    value: function template(url, data, callback) {\n      url = this.normalizeUrl(url);\n\n      if (typeof data === 'function') {\n        callback = data;\n        data = {};\n      }\n\n      data = data || {};\n\n      var me = this;\n      var tpl = void 0;\n\n      // Check the cache\n      if (this.importCache.hasOwnProperty(url)) {\n        tpl = this.importCache[url];\n        return this.applyData(tpl, data, callback);\n      }\n\n      this.get(url, function (res) {\n        var ext = null;\n        try {\n          ext = url.split('/').pop().split('?')[0].split('.').pop().toLowerCase();\n        } catch (e) {}\n        if (['js', 'css'].indexOf((ext || '').trim().toLowerCase()) >= 0) {\n          console.warn('Cannot use a .' + ext + ' file as a template. Only HTML templates are supported.');\n          return;\n        }\n\n        me.importCache[url] = res.responseText;\n        me.applyData(res.responseText, data, callback);\n      });\n    }\n  }]);\n\n  return Network;\n}();\n\nNGN.NET = new Network();\n\n/**\n * @class NGN.DOM.svg\n * Provides a way to easily manage SVG images within a document while\n * retaining the ability to style them with external CSS.\n * @singleton\n */\n/* This file should be loaded in the <head>, not at the end of the <body>.\n* By loading this script before the rest of the DOM, it will insert the\n* FOUC (Flash of Unstyled Content) CSS into the page BEFORE unstyled SVG images\n* are loaded. If this script is included in the <body>, the CSS will be loaded\n* AFTER the SVG images are loaded, meaning they may display briefly before\n* proper styling can be applied to the DOM.\n*/\n\n// Prevent FOUC\n// (function () {\n//   let ss = document.createElement('style')\n//   let str = document.createTextNode('svg[src]{display:none}svg.loading{height:0px !important;width:0px !important}')\n//   ss.appendChild(str)\n//   document.head.appendChild(ss)\n// })()\nvar fuoc = function fuoc() {\n  var ss = document.createElement('style');\n  var str = document.createTextNode('svg[src]{display:none}svg.loading{height:0px !important;width:0px !important}');\n  ss.appendChild(str);\n  document.head.appendChild(ss);\n};\nfuoc();\n\n// SVG Controller\nNGN.DOM = NGN.DOM || {};\nNGN.DOM.svg = {};\n\nObject.defineProperties(NGN.DOM.svg, {\n  /**\n   * @property {Object} _cache\n   * A cache of SVG images.\n   */\n  _cache: NGN.private({}),\n\n  /**\n   * @method swap\n   * Replace image tags with the SVG equivalent.\n   * @param {HTMLElement|NodeList} imgs\n   * The HTML element or node list containing the images that should be swapped out for SVG files.\n   * @param {function} [callback]\n   * Executed when the image swap is complete. There are no arguments passed to the callback.\n   * @private\n   */\n  swap: NGN.privateconst(function (svgs, callback) {\n    var me = this;\n    for (var i = 0; i < svgs.length; i++) {\n      var attr = svgs[i].attributes;\n      var output = me._cache[svgs[i].getAttribute('src')];\n      var attrs = [];\n\n      try {\n        attrs = /<svg(\\s.*=[\\\"\\'].*?[\\\"\\'])?>/i.exec(output)[1].trim();\n        var sep = /[\\\"\\']\\s/i.exec(attrs);\n        sep = sep !== null ? sep[0] : '\\\" ';\n        attrs = attrs.replace(new RegExp(sep, 'gi'), sep.replace(/\\s/ig, ',')).split(',');\n      } catch (e) {\n        console.error(e);\n      }\n\n      attrs = Array.isArray(attrs) ? attrs : [attrs];\n\n      var map = attrs.map(function (els) {\n        return els.split('=')[0].trim().toLowerCase();\n      });\n\n      for (var x = 0; x < attr.length; x++) {\n        var idx = map.indexOf(attr[x].name.toLowerCase());\n        if (idx < 0) {\n          attrs.push(attr[x].name + '=\"' + attr[x].value + '\"');\n        } else {\n          attrs[idx] = attr[x].name + '=\"' + attr[x].value + '\"';\n        }\n      }\n\n      attrs = attrs.filter(function (a) {\n        return a.split('=')[0].toLowerCase() !== 'src';\n      });\n\n      var svg = '<svg ' + attrs.join(' ') + '>';\n\n      svgs[i].outerHTML = output.replace(/<svg.*?>/i, svg);\n    }\n\n    callback && callback();\n  }),\n\n  /**\n   * @method id\n   * @param  {string} url\n   * Create an ID that can be used to reference an SVG symbol.\n   * @return {string}\n   * @private\n   */\n  id: NGN.privateconst(function (url) {\n    return url.replace(/.*\\:\\/\\/|[^A-Za-z0-9]|www/gi, '');\n  }),\n\n  /**\n   * @method cleanCode\n   * Captures all of the content between the <svg></svg> tag.\n   * @param  {string} code\n   * The code to clean up.\n   * @return {string}\n   * @private\n   */\n  cleanCode: NGN.privateconst(function (code) {\n    try {\n      return code.toString().trim().replace(/(\\r\\n|\\n|\\r)/gm, '').replace(/\\s+/g, ' ').match(/\\<svg.*\\<\\/svg\\>/igm, '')[0];\n    } catch (e) {\n      return '';\n    }\n  }),\n\n  /**\n   * @method viewbox\n   * Retrieves the viewbox attribute from the source code.\n   * @param  {string} code\n   * The code to extract the viewbox attribute from.\n   * @return {string}\n   * @private\n   */\n  viewbox: NGN.privateconst(function (code) {\n    return (/(viewbox=[\"'])(.*?)([\"'])/igm.exec(code.toString().trim())[2] || '0 0 100 100'\n    );\n  }),\n\n  cache: NGN.private(function (url, svg) {\n    this._cache[url] = svg;\n  }),\n\n  fetchFile: NGN.private(function (url, callback) {\n    var _this5 = this;\n\n    if (!callback) {\n      return;\n    }\n\n    if (!NGN.nodelike || url.indexOf('http') === 0) {\n      (function () {\n        var me = _this5;\n        NGN.NET.get(url, function (res) {\n          callback && callback(res.status !== 200 ? new Error(res.responseText) : me.cleanCode(res.responseText));\n        });\n      })();\n    } else {\n      var content = '';\n\n      try {\n        content = require('fs').readFileSync(require('path').resolve(url).replace('file://', '')).toString();\n      } catch (e) {\n        try {\n          content = require('fs').readFileSync(require('path').resolve(__dirname, url).replace('file://', '')).toString();\n        } catch (ee) {}\n      }\n\n      callback(content);\n    }\n  }),\n\n  /**\n   * @method update\n   * Replace any <img src=\"*.svg\"> with the SVG equivalent.\n   * @param {HTMLElement|NodeList} section\n   * The HTML DOM element to update. All children of this element will also be updated.\n   * @param {function} callback\n   * Execute this function after the update is complete.\n   */\n  update: NGN.const(function (section, callback) {\n    if (typeof section === 'function') {\n      callback = section;\n      section = document.body;\n    } else {\n      section = section || document.body;\n    }\n\n    if (section.nodeName === '#text') {\n      return;\n    }\n\n    var me = this;\n    section = section.hasOwnProperty('length') === true ? NGN._splice(section) : [section];\n\n    section.forEach(function (sec) {\n      var imgs = sec.querySelectorAll('svg[src]');\n\n      // Loop through images, prime the cache.\n      for (var i = 0; i < imgs.length; i++) {\n        me._cache[imgs[i].getAttribute('src')] = me._cache[imgs[i].getAttribute('src')] || null;\n      }\n\n      // Fetch all of the unrecognized svg files\n      var unfetched = Object.keys(me._cache).filter(function (url) {\n        return me._cache[url] === null;\n      });\n\n      var remaining = unfetched.length;\n      unfetched.forEach(function (url) {\n        me.fetchFile(url, function (content) {\n          if (!(content instanceof Error)) {\n            me.cache(url, content);\n          }\n          remaining--;\n        });\n      });\n\n      // Monitor for download completion\n      var monitor = setInterval(function () {\n        if (remaining === 0) {\n          clearInterval(monitor);\n          me.swap(imgs, callback);\n        }\n      }, 5);\n    });\n  })\n});","'use strict'\n\n/**\n * @class NGN.EventEmitter\n * @inheritdoc\n */\nNGN.inherit(Object.defineProperties({}, {\n  queued: NGN.private({}),\n\n  /**\n   * @method pool\n   * A helper command to create multiple related subscribers\n   * all at once. This is a convenience function.\n   * @property {string} [prefix]\n   * Supply a prefix to be added to every event. For example,\n   * `myScope.` would turn `someEvent` into `myScope.someEvent`.\n   * @property {Object} subscriberObject\n   * A key:value object where the key is the name of the\n   * unprefixed event and the key is the handler function.\n   * @property {Function} [callback]\n   * A callback to run after the entire pool is registered. Receives\n   * a single {Object} argument containing all of the subscribers for\n   * each event registered within the pool.\n   */\n  pool: NGN.const(function (prefix, group, callback) {\n    if (typeof prefix !== 'string') {\n      group = prefix\n      prefix = ''\n    }\n\n    let pool = {}\n\n    for (let eventName in group) {\n      let topic = (prefix.trim() || '') + eventName\n      if (typeof group[eventName] === 'function') {\n        pool[eventName] = this.on(topic, group[eventName])\n      } else {\n        console.warn('%c' + topic + '%c could not be pooled in the event emitter because it\\'s value is not a function.', NGN.css, '')\n      }\n    }\n    if (callback) {\n      callback(pool)\n    }\n  }),\n\n  /**\n   * @method attach\n   * Attach a function to a topic. This can be used\n   * to forward events in response to asynchronous functions.\n   *\n   * For example:\n   *\n   * ```js\n   * myAsyncDataFetch(NGN.BUS.attach('topicName'))\n   * ```\n   *\n   * This is the same as:\n   *\n   * ```js\n   * myAsyncCall(function(data){\n   *  NGN.BUS.emit('topicName', data)\n   * })\n   * ```\n   * @param {string} eventName\n   * The name of the event to attach a handler method to.\n   * @param {boolean} [preventDefaultAction=false]\n   * Setting this to `true` will execute a `event.preventDefault()` before\n   * attaching the handler.\n   * @returns {function}\n   * Returns a function that will automatically be associated with an event.\n   */\n  attach: NGN.const(function (eventName, preventDefaultAction) {\n    const me = this\n    preventDefaultAction = NGN.coalesce(preventDefaultAction, false)\n\n    return function (e) {\n      if (preventDefaultAction && e.hasOwnProperty('preventDefault')) {\n        e.preventDefault()\n      }\n      let args = NGN.slice(arguments)//NGN.slice(arguments)\n      args.unshift(eventName)\n      me.emit.apply(me, args)\n    }\n  }),\n\n  /**\n   * @method bind\n   * A special subscriber that fires one or more event in response to\n   * to an event. This is used to bubble events up/down an event chain.\n   *\n   * For example:\n   *\n   * ```js\n   * BUS.bind('sourceEvent', ['someEvent','anotherEvent'], {payload:true})\n   * ```\n   * When `sourceEvent` is published, the bind method triggers `someEvent` and\n   * `anotherEvent`, passing the payload object to `someEvent` and\n   * `anotherEvent` subscribers simultaneously.\n   *\n   * @param {String} sourceEvent\n   * The event to subscribe to.\n   * @param {String|Array} triggeredEvent\n   * An event or array of events to fire in response to the sourceEvent.\n   * @param {any} data\n   * Optional data to pass to each bound event handler.\n   * @returns {Object}\n   * Returns an object with a single `remove()` method.\n   */\n  bind: NGN.const(function (eventName, triggers, payload) {\n    triggers = typeof triggers === 'string' ? [triggers] : triggers\n\n    const me = this\n    let listener = function () {\n      let args = NGN.slice(arguments)\n\n      if (payload) {\n        args.push(payload)\n      }\n\n      for (let trigger in triggers) {\n        let argList = args.slice()\n        argList.unshift(triggers[trigger])\n        me.emit.apply(me, argList)\n      }\n    }\n\n    this.on(eventName, listener)\n\n    // Provide handle back for removal of topic\n    return {\n      remove: function () {\n        me.off(eventName, listener)\n      }\n    }\n  }),\n\n  /**\n   * @method queue\n   * This method waits for the specified duration, then publishes an\n   * event once. This will publish the event only once at the end of the\n   * wait period, even if the event is triggered multiple times. This can\n   * be useful when working with many events triggered in rapid succession.\n   *\n   * For example, an NGN.DATA.Model representing a person may be used to\n   * track a user profile. The NGN.DATA.Model fires an event called `field.update`\n   * every time a data field is modified. In many cases, a user may update\n   * multiple fields of their profile using a form with a \"Save\" button.\n   * Instead of generating a new \"save\" (to disk, to memory, to an API, etc)\n   * operation for each field, the publishOnce event can wait until all\n   * changes are made before running the save operation.\n   *\n   * ```js\n   * // Create a data model representing a person.\n   * var Person = new NGN.DATA.Model({....})\n   *\n   * // Create a new person record for a user.\n   * var user = new Person()\n   *\n   * // When the user is modified, save the data.\n   * user.on('field.update', function () {\n   * \t // Wait 300 milliseconds to trigger the save event\n   *   NGN.BUS.queue('user.save', 300)\n   * })\n   *\n   * // Save the user using an API\n   * NGN.BUS.on('user.save', function () {\n   * \t NGN.HTTP.put({\n   * \t   url: 'https://my.api.com/user',\n   * \t   json: user.data\n   * \t })\n   * })\n   *\n   * // Modify the record attributes (which are blank by default)\n   * user.firstname = 'John'\n   * user.lastname = 'Doe'\n   * user.age = 42\n   *\n   * // Make another update 1 second later\n   * setTimeout(function () {\n   *   user.age = 32\n   * }, 1000)\n   * ```\n   *\n   * The code above sets up a model and record. Then it listens to the record\n   * for field updates. Each time it recognizes an update, it queues the \"save\"\n   * event. When the queue matures, it fires the `user.save` event.\n   *\n   * The first `field.update` is triggered when `user.firstname = 'John'` runs.\n   * This initiates a queue for `user.save`, set to mature in 300 millisenconds.\n   * Next, a `field.update` is triggered when `user.lastname = 'Doe'` runs.\n   * This time, since the queue for `user.save` is already initiated, notthing\n   * new happens. Finally, a `field.update` is triggered when `user.age = 42`\n   * runs. Just like the last one, nothing happens since the `user.save` queue\n   * is already active.\n   *\n   * The `user.save` queue \"matures\" after 300 milliseconds. This means after\n   * 300 milliseconds have elapsed, the `user.save` event is triggered. In this\n   * example, it means the `NGN.HTTP.put()` code will be executed. As a result,\n   * all 3 change (firstname, lastname, and age) will be complete before the\n   * API request is executed. The queue is cleared immediately.\n   *\n   * The final update occurs 1 second later (700 milliseconds after the queue\n   * matures). This triggers a `field.update`, but since the queue is no\n   * longer active, it is re-initiated. 300 milliseconds later, the `user.save`\n   * event is fired again, thus executing the API request again (1.3 seconds\n   * in total).\n   * @param {string} eventName\n   * The event/topic to publish/emit.\n   * @param {Number} [delay=300]\n   * The number of milliseconds to wait before firing the event.\n   * @param {Any} [payload]\n   * An optional payload, such as data to be passed to an event handler.\n   */\n  queue: NGN.const(function (eventName, delay) {\n    if (!this.queued.hasOwnProperty(eventName)) {\n      const me = this\n      let args = NGN.slice(arguments)\n      args.splice(1, 1)\n\n      this.queued[eventName] = setTimeout(function () {\n        delete me.queued[eventName]\n        me.emit.apply(me, args)\n      }, delay)\n    }\n  })\n}), NGN.EventEmitter)\n","'use strict'\n\nObject.defineProperty(NGN, 'global', NGN.privateconst(NGN.nodelike ? global : window))\n\n// Force scope\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.body.classList.add('ngn')\n})\n","'use strict'\n\n/**\n * @class NGN\n * @inheritdoc\n */\n /**\n  * @method createException\n  * Create a custom global exception.\n  * For more information, see the [Custom Exceptions Guide](#!/guide/customerrors).\n  * @param {Object} config\n  * The configuration of the new error.\n  * @param {String} [config.name=NgnError]\n  * The pretty name of the exception. Alphanumeric characters only (underscore is acceptable).\n  * @param {String} [config.type=TypeError]\n  * The type of error. This is commonly `TypeError` or `ReferenceError`, but\n  * it can be any custom value.\n  * @param {String} [config.severity=minor]\n  * A descriptive \"level\" indicating how critical the error is.\n  * @param {String} [config.message=Unknown Error]\n  * The default message to output when none is specified.\n  * @param {Object} [config.custom]\n  * Provide a key/value object of custom attributes for the error.\n  * There are two \"special\" custom attributes: `help` and `cause`.\n  * When provided, these will be written to stdout whenever the error's\n  * stack is viewed.\n  *\n  * For example:\n  *\n  * ```js\n  * require('ngn')\n  *\n  * NGN.createException({\n  *   name: 'Test Problem',\n  *   message: 'An example error.',\n  *   custom: {\n  *     help: 'Remove the throw statement.',\n  *     cause: 'Testing the error output.'\n  *   }\n  * });\n  *\n  * throw TestProblem()\n  * ```\n  * The code above generates the following console output:\n  *\n  * ```sh\n  * Testing the error output.\n  * Remove the throw statement.\n  * /path/to/test.js:12\n  *    throw TestProblem();\n  *    ^\n  *\n  * TestProblem: An example error.\n  *    at null._onTimeout (/path/to/test.js:12:11)\n  *    at Timer.listOnTimeout (timers.js:92:15)\n  * ```\n  */\nNGN.extend('createException', NGN.public(function (config) {\n  config = config || {}\n  config = typeof config === 'string' ? { message: config } : config\n  config.name = config.name || 'NgnError'\n  config.name = config.name.replace(/[^a-zA-Z0-9_]/gi, '')\n\n  // Create the error as a function\n  NGN.global[config.name] = function () {\n    if (arguments.length > 0) {\n      config.message = arguments[0]\n    }\n    return new CustomException(config)\n  }\n}))\n","/**\n * @class DOM\n * A utility class to simplify some DOM management tasks.\n */\nNGN.DOM = {}\n\nObject.defineProperties(NGN.DOM, {\n  /**\n   * @method ready\n   * Executes code after the DOM is loaded.\n   * @param {function} callback\n   * The function to call when the DOM is fully loaded.\n   */\n  ready: NGN.const(function (callback) {\n    document.addEventListener('DOMContentLoaded', callback)\n  }),\n\n  /**\n   * @method destroy\n   * Remove a DOM element.\n   * @param {HTMLElement|NodeList|String|Array} node\n   * Accepts a single `HTMLElement`, a `NodeList`, a CSS selector, or\n   * an array of `HTMLElements`/`NodeList`/CSS Selectors.\n   */\n  destroy: NGN.const(function (element) {\n    // Process a CSS selector\n    if (typeof element === 'string') {\n      let str = element\n      element = document.querySelectorAll(element)\n\n      if (element.length === 0) {\n        console.warn('The \\\"' + str + '\\\" selector did not return any elements.')\n        return\n      }\n      // Iterate through results and remove each element.\n      NGN.slice(element).forEach(this.destroy)\n    } else {\n      switch (NGN.typeof(element)) {\n        case 'array':\n          element.forEach(this.destroy)\n          return\n        case 'nodelist':\n          NGN.slice(element).forEach(this.destroy)\n          return\n        case 'htmlelement':\n          element.parentNode.removeChild(element)\n          return\n        default:\n          if (/^html.*element$/.test(NGN.typeof(element))) {\n            element.parentNode.removeChild(element)\n            return\n          }\n          console.warn('An unknown error occurred while trying to remove DOM elements.')\n          console.log('Unknown Element', element)\n      }\n    }\n  }),\n\n  /**\n   * @method findParent\n   * Find a distant parent of a DOM element. This can be thought\n   * of as a reverse CSS selector that traverses UP the DOM chain\n   * to find the parent element.\n   *\n   * For example:\n   *\n   * Assume the following HTML structure & JS code:\n   *\n   * ```html\n   * <section>\n   *   <header class=\"MyGroup\">\n   *     <div>\n   *       <div>\n   *         <button>Delete Entire Group</button>\n   *       </div>\n   *     </div>\n   *   </header>\n   * </section>\n   * ```\n   *\n   * ```js\n   * ref.find('button.remove').addEventListener('click', function (event) {\n   *   event.preventDefault()\n   *   let removeButton = event.currentTarget\n   *   let group = ref.findParent(removeButton,'header')\n   *   ref.destroy(group)\n   * })\n   * ```\n   *\n   * The code above listens for a click on the button. When the button\n   * is clicked, the `findPerent` method recognizes the \"Delete Entire Group\"\n   * button and traverses UP the DOM chain until it finds a `header` DOM\n   * element. The `header` DOM element is returned (as `group` letiable). The\n   * group is then removed using the `ref.destroy` method.\n   *\n   * Alternatively, the same effect could have been achieved if line 4\n   * of the JS code was:\n   * ```js\n   * let group = ref.findParent(removeButton, '.MyGroup')\n   * ```\n   * @param {HTMLElement|String} element\n   * The DOM element or a CSS selector string identifying the\n   * element whose parent should be found.\n   * @param {String} selector\n   * A minimal CSS selector used to identify the parent.\n   * @param {Number} maxDepth\n   * The maximum number of elements to traverse. This can be used to\n   * cap a selector and force it to fail before reaching a known limit.\n   * By default, there is no limit (i.e. maxDepth=null).\n   * @returns {HTMLElement}\n   * Responds with the DOM Element, or `null` if none was found.\n   */\n  findParent: NGN.const(function (node, selector, maxDepth) {\n    if (typeof node === 'string') {\n      node = document.querySelectorAll(node)\n      if (node.length === 0) {\n        console.warn('\\\"' + node + '\\\" is an invalid CSS selector (Does not identify any DOM elements).')\n        return null\n      }\n      node = node[0]\n    }\n\n    let currentNode = node.parentNode\n    let i = 0\n    maxDepth = typeof maxDepth === 'number' ? maxDepth : -1\n\n    while (currentNode.parentNode.querySelector(selector) === null && currentNode.nodeName !== 'BODY') {\n      i++\n      if (maxDepth > 0 && i > maxDepth) {\n        return null\n      }\n      currentNode = currentNode.parentNode\n    }\n\n    return currentNode\n  }),\n\n  /**\n   * @method indexOfParent\n   * Returns the zero-based index of the DOM element related\n   * to its parent element.\n   * For example:\n   *\n   * `html\n   * <div>\n   *   <p>...</p>\n   *   <p>...</p>\n   *   <button id=\"btn\"></button>\n   *   <p>...</p>\n   * </div>\n   * ```\n   *\n   * ```js\n   * let i = NGN.DOM.indexOfParent(document.getElementById('btn'))\n   * console.log(i) // 2\n   * ```\n   * @param {HTMLElement} el\n   * The reference element.\n   * @returns {number}\n   */\n  indexOfParent: NGN.const(function (element) {\n    return NGN.slice(element.parentNode.children).indexOf(element)\n  })\n})\n","/**\n * @class BUS\n * The bus acts as a pub/sub messaging system (as opposed to a queue). It is primarily\n * designed for asynchronous communication between javascript objects, but can also be\n * bound to DOM events.\n *\n * The most common use looks like:\n * ```js\n *   var subscriber = NGN.BUS.subscribe('test', function () {\n *     console.log('test handled')\n *   })\n *\n *   NGN.BUS.subscribeOnce('test', function () {\n *     console.log('RESPOND ONCE!')\n *   })\n *\n *   NGN.BUS.publish('test') // Outputs \"test handled\" and \"RESPOND ONCE\".\n *\n *   NGN.BUS.publish('test') // Outputs \"test handled\" only.\n *\n *   subscriber.unsubscribe() // Removes the listener\n *\n *   NGN.BUS.publish('test') // Outputs nothing since the subscription was removed.\n * ```\n * There are a few aliases for ease of use, including `on() --> subscribe()`,\n * `once() --> subscribeOnce()`, and `emit() --> publish()`.\n *\n * It is also possible to use a wildcard in a subscription.\n *\n * ```js\n *   var subscriber = NGN.BUS.subscribe('test.*', function () {\n *     console.log('test handled')\n *   })\n *   var subscriber = NGN.BUS.subscribe('test.create', function () {\n *     console.log('test create handled')\n *   })\n *\n *   NGN.BUS.publish('test.create') // Outputs \"test handled\" and \"test create handled\"\n *\n *   NGN.BUS.publish('test.delete') // Outputs \"test handled\"\n * ```\n * @singleton\n */\nNGN.extend('BUS', NGN.const(new NGN.EventEmitter()))\n","/**\n * @class NGN.ref\n * A global \"pointer\" to DOM elements. This is used to reference and manipulate\n * DOM elements in a simple and standard way, without restricting native functionality.\n */\n'use strict'\n\nNGN.ref = new function () {\n  var requireBUS = function (trigger, event, scope, nm, preventDefault) {\n    if (NGN.BUS === undefined) {\n      return console.error('The event BUS is required for ' + nm + '().')\n    }\n    preventDefault = NGN.coalesce(preventDefault, false)\n    var fn = function (e) {\n      if (preventDefault && e.preventDefault) {\n        e.preventDefault()\n      }\n      NGN.BUS.emit(event, e)\n    }\n    scope.addEventListener(trigger, fn)\n  }\n\n  var qs = function (value, selector, all) {\n    if (typeof value === 'string') {\n      return document[all ? 'querySelector' : 'querySelectorAll']((value + ' > ' + selector).trim())\n    }\n    return value[all ? 'querySelector' : 'querySelectorAll'](selector.trim())\n  }\n\n  Object.defineProperties(this, {\n\n    keys: NGN.define(false, true, false, {}),\n\n    _find: NGN.define(false, false, false, function (value, selector) {\n      if (typeof value === 'string') {\n        var reference = NGN.ref.find((value + ' > ' + selector).trim())\n        if (reference.length === 0) {\n          var tmpref = NGN.ref.find((value).trim())[0].parentNode.querySelectorAll(selector)\n          if (tmpref.length > 0) {\n            if (tmpref.length === 1) {\n              return tmpref[0]\n            }\n            return tmpref\n          }\n        }\n        return reference\n      }\n      return NGN.ref.find(value.querySelectorAll(selector))\n    }),\n\n    /**\n     * @method find\n     * Retrieve the DOM element(s) for the given selector. This method provides\n     * an **unmanaged** reference object.\n     * @private\n     * @param {String} selector\n     * The selector (CSS-style).\n     * @returns {ref}\n     * Returns an instance of the reference.\n     */\n    find: NGN.define(false, false, false, function (value) {\n      var html = typeof value !== 'string'\n      var els = html === false ? document.querySelectorAll(value) : value\n      var result = null\n\n      if (els.length === 1) {\n        if (!els[0].hasOwnProperty('isArray')) {\n          Object.defineProperties(els[0], {\n            isArray: NGN.get(function () {\n              return false\n            }, false)\n          })\n        }\n\n        if (!els[0].hasOwnProperty('find')) {\n          Object.defineProperty(els[0], 'find', NGN.const(function (selector) {\n            return NGN.ref._find(value, selector)\n          }))\n        }\n\n        if (!els[0].hasOwnProperty('forward')) {\n          Object.defineProperty(els[0], 'forward', NGN.const(function (trigger, event) {\n            requireBUS(trigger, event, this, 'forward')\n          }))\n        }\n\n        if (!els[0].hasOwnProperty('on')) {\n          Object.defineProperty(els[0], 'on', NGN.const(function () {\n            this.addEventListener.apply(this, arguments)\n          }))\n        }\n\n        result = els[0]\n      } else {\n        var base = NGN.slice(els)\n        if (NGN.typeof(els) === 'nodelist' && base.length === 1) {\n          base = base[0]\n        }\n\n        // Apply querySelector/All to the response for chaining.\n        Object.defineProperties(base, {\n          querySelector: NGN.define(false, false, false, function (selector) {\n            qs(value, selector)\n          }),\n\n          querySelectorAll: NGN.define(false, false, false, function (selector) {\n            qs(value, selector, true)\n          }),\n\n          addEventListener: NGN.define(false, false, false, function (evt, fn) {\n            for (var el = 0; el < this.length; el++) {\n              this[el].addEventListener(evt, fn)\n            }\n          }),\n\n          removeEventListener: NGN.define(false, false, false, function (evt, fn) {\n            for (var el = 0; el < this.length; el++) {\n              this[el].removeEventListener(evt, fn)\n            }\n          }),\n\n          find: NGN.const(function (selector) {\n            return NGN.ref._find(value, selector)\n          }),\n\n          isArray: NGN.get(function () {\n            return true\n          }, false),\n\n          forward: NGN.define(false, false, false, function (trigger, event) {\n            requireBUS(trigger, event, this, 'forward')\n          })\n        })\n        result = base\n      }\n\n      return result\n    }),\n\n    /**\n     * @method create\n     * Add a reference.\n     * @param {String} [key]\n     * The key/name of the reference. For example, if this is `myElement`,\n     * then `ref.myElement` will return a pointer to this reference.\n     * @param {string} selector\n     * The CSS selector path.\n     */\n    create: NGN.const(function (key, value) {\n      // If the key is not provided but the value is a DOM element, make\n      // an ephemeral reference.\n      if (!value && typeof key !== 'string') {\n        return this.find(key)\n      }\n\n      // Basic error checking\n      if (typeof key !== 'string' && typeof key !== 'number') {\n        throw new Error('Cannot add a non-alphanumeric selector reference.')\n      }\n      if (key.trim().length === 0) {\n        throw new Error('Cannot add a blank selector reference.')\n      }\n      if (value === undefined || value === null || value.trim().length === 0) {\n        throw new Error('Cannot create a null/undefined selector reference.')\n      }\n\n      // Create a reference object\n      var cleankey = this.cleanKey(key)\n      var me = this\n      Object.defineProperty(NGN.ref, cleankey, NGN.private(value))\n\n      Object.defineProperty(NGN.ref, key, {\n        enumerable: true,\n        get: function () {\n          return me.find(value)\n        },\n        set: function (val) {\n          if (val === undefined || val === null || val.trim().length === 0) {\n            throw new Error('Cannot create a null/undefined selector reference.')\n          }\n          NGN.ref[cleankey] = val\n        }\n      })\n\n      this.keys[key] = value\n      this.keys[this.cleanKey(key)] = value\n    }),\n\n    /**\n     * @method remove\n     * Removes a key from the reference manager.\n     */\n    remove: NGN.const(function (key) {\n      if (this[key]) {\n        delete this[key]\n        delete this.keys[key]\n      }\n      var ck = this.cleanKey(key)\n      if (this[ck]) {\n        delete this[ck]\n        delete this.keys[ck]\n      }\n    }),\n\n    /**\n     * @method cleanKey\n     * Creates a clean version of the key used to uniquely identify the reference.\n     * @private\n     * @param {String} key\n     * The key to clean.\n     */\n    cleanKey: NGN.define(false, false, false, function (key) {\n      return key.replace(/[^A-Za-z0-9\\_\\#\\$\\@\\-\\+]/gi, '') + key.length\n    }),\n\n    /**\n     * @property json\n     * A JSON representation of the managed keys and their associated selectors.\n     * @returns {Object}\n     * A key:selector object.\n     */\n    json: {\n      enumerable: true,\n      get: function () {\n        var me = this\n        var obj = {}\n\n        Object.keys(this).forEach(function (el) {\n          if (me.hasOwnProperty(el) && ['json', 'find', 'remove'].indexOf(el.trim().toLowerCase()) < 0 && typeof me[el] !== 'function') {\n            obj[el] = me.keys[el]\n          }\n        })\n        return obj\n      }\n    }\n  })\n}()\n","/**\n * @class NGN.NET\n * A library to issue network requests, typically viaHTTP/S requests.\n * This acts as an AJAX library among other things.\n * @author Corey Butler\n * @singleton\n */\nconst parser = new DOMParser()\nlet fs = NGN.nodelike ? require('fs') : null\n\nclass Network {\n  constructor () {\n    Object.defineProperties(this, {\n      /**\n       * @method xhr\n       * Issue an XHR request.\n       * @private\n       * @param  {Function} callback\n       * The callback to execute when the request finishes (or times out.)\n       */\n      xhr: NGN.privateconst(function (callback) {\n        let res\n\n        if (window.XMLHttpRequest) {\n          // code for IE7+, Firefox, Chrome, Opera, Safari\n          res = new XMLHttpRequest()\n        }\n\n        res.onreadystatechange = function () {\n          if (res.readyState === 4) {\n            if (callback) {\n              callback(res)\n            }\n          }\n        }\n\n        return res\n      }),\n\n      /**\n       * @method run\n       * A wrapper to execute a request.\n       * @private\n       * @param  {string} method required\n       * The method to issue, such as GET, POST, PUT, DELETE, OPTIONS, etc.\n       * @param  {string} url\n       * The URL where the request is issued to.\n       * @param  {Function} callback\n       * A function to call upon completion.\n       */\n      run: NGN.privateconst(function (method, url, callback) {\n        let res = NGN.NET.xhr(callback)\n        res.open(method, url, true)\n        res.send()\n      }),\n\n      /**\n       * @method applyRequestSettings\n       * Apply any configuration details to issue with the request,\n       * such as `username`, `password`, `headers`, etc.\n       * @private\n       * @param {object} xhr\n       * The XHR request object.\n       * @param {object} cfg\n       * The key/value configuration object to apply to the request.\n       * @param {object} cfg.params\n       * A key/value object containing URL paramaters to be passed with the request.\n       * These will automatically be URI-encoded.\n       * @param {object} cfg.headers\n       * A key/value object containing additional headers and associated values to\n       * be passed with the request.\n       * @param {object} cfg.body\n       * An arbitrary body to pass with the request. If no `Content-Type` header is\n       * provided, a `Content-Type: application/textcharset=UTF-8` header is automatically supplied.\n       * This cannot be used with @cfg.json.\n       * @param {object} cfg.json\n       * A JSON object to be sent with the request. It will automatically be\n       * parsed for submission. By default, a `Content-Type: application/json`\n       * header will be applied (this can be overwritten using @cfg.headers).\n       * @param {object} cfg.form\n       * This accepts a key/value object of form elements, or a reference to a <FORM>\n       * HTML element. This automatically adds the appropriate headers.\n       * @param {string} username\n       * A basicauth username to add to the request. This is sent in plain\n       * text, so using SSL to encrypt/protect it is recommended.\n       * @param {string} password\n       * A basicauth password to add to the request. This is sent in plain\n       * text, so using SSL to encrypt/protect it is recommended.\n       * @param {boolean} [withCredentials=false]\n       * indicates whether or not cross-site `Access-Control` requests should be\n       * made using credentials such as cookies or authorization headers.\n       * The default is `false`.\n       */\n      applyRequestSettings: NGN.privateconst(function (xhr, cfg) {\n        if (!xhr || !cfg) {\n          throw new Error('No XHR or configuration object defined.')\n        }\n\n        // Add URL Parameters\n        if (cfg.params) {\n          let parms = Object.keys(cfg.params).map(function (parm) {\n            return parm + '=' + encodeURIComponent(cfg.params[parm])\n          })\n          cfg.url += '?' + parms.join('&')\n        }\n\n        xhr.open(cfg.method || 'POST', cfg.url, true)\n\n        // Set headers\n        cfg.header = cfg.header || cfg.headers || {}\n        Object.keys(cfg.header).forEach(function (header) {\n          xhr.setRequestHeader(header, cfg.header[header])\n        })\n\n        // Handle body (Blank, plain text, or JSON)\n        let body = null\n        if (cfg.json) {\n          if (!cfg.header || (cfg.header && !cfg.header['Content-Type'])) {\n            xhr.setRequestHeader('Content-Type', 'application/jsoncharset=UTF-8')\n          }\n          body = JSON.stringify(cfg.json).trim()\n        } else if (cfg.body) {\n          if (!cfg.header || (cfg.header && !cfg.header['Content-Type'])) {\n            xhr.setRequestHeader('Content-Type', 'application/text')\n          }\n          body = cfg.body\n        } else if (cfg.form) {\n          body = new FormData()\n          Object.keys(cfg.form).forEach(function (el) {\n            body.append(el, cfg.form[el])\n          })\n        }\n\n        // Handle withCredentials\n        if (cfg.withCredentials) {\n          xhr.withCredentials = cfg.withCredentials\n        }\n\n        // Handle credentials sent with request\n        if (cfg.username && cfg.password) {\n          // Basic Auth\n          xhr.setRequestHeader('Authorization', 'Basic ' + btoa(cfg.username + ':' + cfg.password))\n        } else if (cfg.accessToken) {\n          // Bearer Auth\n          xhr.setRequestHeader('Authorization', 'Bearer ' + cfg.accessToken)\n        }\n\n        return body\n      }),\n\n      /**\n       * @method prepend\n       * A helper method to prepend arguments.\n       * @private\n       * @param  {[type]} args [description]\n       * @param  {[type]} el   [description]\n       * @return {[type]}      [description]\n       */\n      prepend: NGN.privateconst(function (args, el) {\n        args = NGN.slice(args)\n        args.unshift(el)\n        return args\n      }),\n\n      /**\n       * @method getFile\n       * A \"get\" method specifically for node-like environments.\n       * @param {string} url\n       * The URL to issue the request to.\n       * @param {Function} callback\n       * A callback method to run when the request is complete.\n       * This receives the response object as the only argument.\n       * @private\n       */\n      getFile: NGN.privateconst(function (url) {\n        if (fs !== null) {\n          let rsp = {\n            status: fs.existsSync(url.replace('file://', '')) ? 200 : 400\n          }\n          rsp.responseText = rsp.status === 200 ? fs.readFileSync(url.replace('file://', '')).toString() : 'File could not be found.'\n          return rsp\n        } else {\n          throw new Error(url + ' does not exist or could not be found.')\n        }\n      }),\n\n      /**\n       * @method normalizeUrl\n       * Cleanup a URL.\n       * @private\n       */\n      normalizeUrl: NGN.privateconst(function (url) {\n        let uri = []\n\n        url.split('/').forEach(function (el) {\n          if (el === '..') {\n            uri.pop()\n          } else if (el !== '.') {\n            uri.push(el)\n          }\n        })\n\n        return uri.join('/').replace(/\\:\\/{3,50}/gi, '://')\n      }),\n\n      /**\n       * @method processImport\n       * A helper class to process imported content and place\n       * it in the DOM accordingly.\n       * @param {string} url\n       * The URL of remote HTML snippet.\n       * @param {HTMLElement} target\n       * The DOM element where the resulting code should be appended.\n       * @param {string} callback\n       * Returns the HTMLElement, which can be directly inserted into the DOM.\n       * @param {HTMLElement} callback.element\n       * The new DOM element/NodeList.\n       * @param {boolean} [before=false]\n       * If set to true, insert before the callback.element.\n       * @private\n       */\n      processImport: NGN.privateconst(function (url, target, callback, before) {\n        before = before !== undefined ? before : false\n        this.import(url, function (element) {\n          if (typeof element === 'string') {\n            element = document.createTextNode(element)\n          } else if (element.length) {\n            let out = []\n            NGN.slice(element).forEach(function (el) {\n              if (before) {\n                out.push(target.parentNode.insertBefore(el, target))\n                target = el\n              } else {\n                out.push(target.appendChild(el))\n              }\n            })\n            callback && callback(out)\n            return\n          }\n          if (before) {\n            target.parentNode.insertBefore(element, target)\n          } else {\n            target.appendChild(element)\n          }\n          callback && callback(element)\n        })\n      }),\n\n      /**\n       * @method domainRoot\n       * Returns the root (no http/s) of the URL.\n       * @param {string} url\n       * The URL to get the root of.\n       * @private\n       */\n      domainRoot: NGN.privateconst(function (url) {\n        let r = (url.search(/^https?\\:\\/\\//) !== -1 ? url.match(/^https?\\:\\/\\/([^\\/?#]+)(?:[\\/?#]|$)/i, '') : url.match(/^([^\\/?#]+)(?:[\\/?#]|$)/i, ''))\n        return r === null || r[1].length < 3 ? window.location.host : r[1]\n      }),\n\n      /**\n       * @method isCrossOrigin\n       * Determine if accessing a URL is considered a cross origin request.\n       * @param {string} url\n       * The URL to identify as a COR.\n       * @returns {boolean}\n       * @private\n       */\n      isCrossOrigin: NGN.privateconst(function (url) {\n        return this.domainRoot(url) !== window.location.host\n      }),\n\n      /**\n       * @method prelink\n       * A helper method to construct pre-fetch style DOM elements.\n       * This also fires an event when the element is added to the DOM.\n       * @param {string} url\n       * The URL of the operation.\n       * @param {string} rel\n       * The type of operation. For example: `preconnect`.\n       * @param {boolean} [crossorigin]\n       * Set to `true` to identify the request as a cross origin request.\n       * By default, NGN will compare the URL to the current URL in an\n       * attempt to determine if the request is across origins.\n       * @private\n       */\n      prelink: NGN.privateconst(function (url, rel, cor) {\n        if (!document.head) {\n          console.warn('Cannot use a preconnect, predns, etc because there is no HEAD in the HTML document.')\n          return\n        }\n\n        let p = document.createElement('link')\n        p.rel = rel\n        p.href = url.trim().toLowerCase().substr(0, 4) !== 'http' ? this.normalizeUrl(window.location.origin + window.location.pathname + url) : url\n\n        NGN.coalesce(cor, this.isCrossOrigin(url)) && (p.setAttribute('crossorigin', 'true'))\n        document.head.appendChild(p)\n        NGN.BUS.emit('network.' + rel)\n      }),\n\n      importCache: NGN.private({}),\n\n      createElement: NGN.privateconst(function (str) {\n        return parser.parseFromString(str, 'text/html').querySelector('body').children\n      }),\n\n      applyData: NGN.privateconst(function (tpl, data, callback) {\n        if (tpl === undefined) {\n          console.warn('Empty template.')\n          callback && callback()\n          return\n        }\n\n        // Apply data to the template.\n        Object.keys(data).forEach(function (key) {\n          let re = new RegExp('\\{\\{' + key + '\\}\\}', 'gm')\n          tpl = tpl.replace(re, data[key])\n        })\n\n        // Clear any unused template code\n        tpl = tpl.replace(/(\\{\\{.*\\}\\})/gm, '')\n\n        let el = this.createElement(tpl)\n        callback && callback(el[0])\n      })\n    })\n  }\n\n  /**\n   * @method send\n   * Send the request via HTTP/S.\n   * @param  {object} cfg\n   * The configuration to use when sending the request. See @applyRequestSettings#cfg\n   * for configuration details.\n   * @param  {Function} callback\n   * A callback to excute upon completion. This receives a standard response\n   * object.\n   */\n  send (cfg, callback) {\n    cfg = cfg || {}\n    let res = this.xhr(callback)\n    let body = this.applyRequestSettings(res, cfg)\n    res.send(body)\n  }\n\n  /**\n   * @method get\n   * Issue a `GET` request.\n   * @param {string} url\n   * The URL to issue the request to.\n   * @param {Function} callback\n   * A callback method to run when the request is complete.\n   * This receives the response object as the only argument.\n   */\n  get () {\n    if (typeof arguments[0] === 'object') {\n      let cfg = arguments[0]\n      cfg.method = 'GET'\n      cfg.url = typeof arguments[1] === 'string' ? arguments[1] : cfg.url\n      if (cfg.url.substr(0, 4) && NGN.nodelike) {\n        return arguments[arguments.length - 1](this.getFile(cfg.url))\n      }\n      return this.send(cfg, arguments[arguments.length - 1])\n    }\n    if (arguments[0].substr(0, 4) === 'file' && NGN.nodelike) {\n      return arguments[arguments.length - 1](this.getFile(arguments[0]))\n    }\n    this.run.apply(this.run, this.prepend(arguments, 'GET'))\n  }\n\n  /**\n   * @method head\n   * Issue a `HEAD` request.\n   * @param {string} url\n   * The URL to issue the request to.\n   * @param {Function} callback\n   * A callback method to run when the request is complete.\n   * This receives the response object as the only argument.\n   */\n  head (uri, callback) {\n    if (typeof arguments[0] === 'object') {\n      let cfg = arguments[0]\n      cfg.method = 'HEAD'\n      cfg.url = typeof arguments[1] === 'string' ? arguments[1] : cfg.url\n      return this.send(cfg, arguments[arguments.length - 1])\n    }\n    this.run.apply(this.run, this.prepend(arguments, 'HEAD'))\n  }\n\n  /**\n   * @method put\n   * Issue a `PUT` request.\n   * @param  {object} cfg\n   * See the options for @send#cfg\n   * @param  {Function} callback\n   * A callback method to run when the request is complete.\n   * This receives the response object as the only argument.\n   */\n  put (cfg, callback) {\n    cfg = cfg || {}\n    cfg.method = 'PUT'\n    cfg.url = cfg.url || window.location\n    this.send(cfg, callback)\n  }\n\n  /**\n   * @method post\n   * Issue a `POST` request.\n   * @param  {object} cfg\n   * See the options for @send#cfg\n   * @param  {Function} callback\n   * A callback method to run when the request is complete.\n   * This receives the response object as the only argument.\n   */\n  post (cfg, callback) {\n    cfg = cfg || {}\n    cfg.method = 'POST'\n    cfg.url = cfg.url || window.location\n    this.send(cfg, callback)\n  }\n\n  /**\n   * @method delete\n   * Issue a `DELETE` request.\n   * @param {string} url\n   * The URL to issue the request to.\n   * @param {Function} callback\n   * A callback method to run when the request is complete.\n   * This receives the response object as the only argument.\n   */\n  delete () {\n    this.run.apply(this.run, this.prepend(arguments, 'DELETE'))\n  }\n\n  /**\n   * @method json\n   * This is a shortcut method for creating a `GET` request and\n   * auto-processing the response body into a JSON object.\n   * @param  {string} url\n   * The URL to issue the request to.\n   * @param  {Function} callback\n   * This receives a JSON response object from the server as its only argument.\n   */\n  json (cfg, url, callback) {\n    if (typeof cfg === 'string') {\n      callback = url\n      url = cfg\n      cfg = null\n    }\n    if (cfg === null) {\n      this.run('GET', url, function (res) {\n        if (res.status !== 200) {\n          throw Error('Could not retrieve JSON data from ' + url + ' (Status Code: ' + res.status + ').')\n        }\n        try {\n          res.json = JSON.parse(res.responseText)\n        } catch (e) {\n          res.json = null\n        }\n        callback && callback(res.json)\n      })\n    } else {\n      cfg.url = url\n      this.get(cfg, function (res) {\n        if (res.status !== 200) {\n          throw Error('Could not retrieve JSON data from ' + url + ' (Status Code: ' + res.status + ').')\n        }\n        try {\n          res.json = JSON.parse(res.responseText)\n        } catch (e) {\n          res.json = null\n        }\n        callback && callback(res.json)\n      })\n    }\n  }\n\n  /**\n   * @method import\n   * Import a remote HTML fragment.\n   * @param {string|array} url\n   * The URL of remote HTML snippet. If the URL has a `.js` or `.css`\n   * extension, it will automatically be added to the `<head>`.\n   * It is also possible to provide an array of string values. Take\n   * note that the callback may return a different value based on\n   * this input.\n   * @param {string|array} callback\n   * If a **string** is provided as the URL, this returns the HTMLElement,\n   * which can be directly inserted into the DOM. If an **array** is\n   * provided as the URL, the callback will return an array of HTMLElements.\n   * For example:\n   *\n   * ```js\n   * NGN.NET.import([\n   *   '/path/a.html',\n   *   '/path/b.html',\n   *   '/path/a.js'],\n   *    function (elements){\n   *      console.dir(elements)\n   *    }\n   * })\n   *```\n   * The result `elements` array would look like:\n   *\n   * ```js\n   * [\n   *   HTMLElement, // DOM element created for a.html\n   *   HTMLElement, // DOM element created for b.html\n   *   HTMLElement  // DOM element created for a.js (this will be in the <head>)\n   * ]\n   * ```\n   * The last array element is `null`\n   * @param {boolean} [bypassCache=false]\n   * When set to `true`, bypass the cache.\n   * @fires html.import\n   * Returns the HTMLElement/NodeList as an argument to the event handler.\n   */\n  import (url, callback, bypassCache) {\n    // Support multiple simultaneous imports\n    if (Array.isArray(url)) {\n      let self = this\n      let out = new Array(url.length)\n      let i = 0\n      url.forEach(function (uri, num) {\n        self.import(uri, function (el) {\n          out[num] = el\n          i++\n        }, bypassCache)\n      })\n      if (callback) {\n        let int = setInterval(function () {\n          if (i === url.length) {\n            clearInterval(int)\n            callback(out)\n          }\n        }, 5)\n      }\n      return\n    }\n\n    // Support JS/CSS\n    let ext = null\n    try {\n      ext = url.split('/').pop().split('?')[0].split('.').pop().toLowerCase()\n      let s\n      if (ext === 'js') {\n        s = document.createElement('script')\n        s.setAttribute('type', 'text/javascript')\n        s.setAttribute('src', url)\n      } else if (ext === 'css') {\n        s = document.createElement('link')\n        s.setAttribute('rel', 'stylesheet')\n        s.setAttribute('type', 'text/css')\n        s.setAttribute('href', url)\n      }\n      s.onload = typeof callback === 'function' ? function () { callback(s) } : function () {}\n      document.getElementsByTagName('head')[0].appendChild(s)\n    } catch (e) {}\n\n    if (['js', 'css'].indexOf((ext || '').trim().toLowerCase()) >= 0) {\n      return\n    }\n\n    bypassCache = typeof bypassCache === 'boolean' ? bypassCache : false\n\n    // If a local reference is provided, complete the path.\n    if (url.substr(0, 4) !== 'http') {\n      let path = window.location.href.split('/')\n      path.pop()\n      url = path.join('/') + '/' + url\n    }\n\n    // Use the cache if defined & not bypassed\n    if (!bypassCache && this.importCache.hasOwnProperty(url)) {\n      let doc = this.createElement(this.importCache[url])\n      callback && callback(doc.length === 1 ? doc[0] : doc)\n      if (window.NGN.BUS) {\n        window.NGN.BUS.emit('html.import', doc.length === 1 ? doc[0] : doc)\n      }\n      // console.warn('Used cached version of '+url)\n      return\n    }\n\n    // Retrieve the file content\n    let me = this\n    this.get(url, function (res) {\n      if (res.status !== 200) {\n        return console.warn('Check the file path of the snippet that needs to be imported. ' + url + ' could not be found (' + res.status + ')')\n      }\n\n      let doc = me.createElement(res.responseText)\n      me.importCache[url] = res.responseText\n\n      if (doc.length === 0) {\n        console.warn(me.normalizeUrl(url) + ' import has no HTML tags.')\n        callback && callback(res.responseText)\n        if (window.NGN.BUS) {\n          window.NGN.BUS.emit('html.import', res.responseText)\n        }\n      } else {\n        let el = doc.length === 1 ? doc[0] : doc\n        callback && callback(el)\n        if (window.NGN.BUS) {\n          window.NGN.BUS.emit('html.import', el)\n        }\n      }\n    })\n  }\n\n  /**\n   * @method importTo\n   * This helper method uses the #import method to retrieve an HTML\n   * fragment and insert it into the specified DOM element. This is\n   * the equivalent of using results of the #import to retrieve a\n   * snippet, then doing a `target.appendChild(importedElement)`.\n   * @param {string} url\n   * The URL of remote HTML snippet.\n   * @param {HTMLElement} target\n   * The DOM element where the resulting code should be appended.\n   * @param {string} callback\n   * Returns the HTMLElement, which can be directly inserted into the DOM.\n   * @param {HTMLElement} callback.element\n   * The new DOM element/NodeList.\n   */\n  importTo (url, target, callback) {\n    this.processImport(url, target, callback)\n  }\n\n  /**\n   * @method importBefore\n   * This helper method uses the #import method to retrieve an HTML\n   * fragment and insert it into the DOM before the target element. This is\n   * the equivalent of using results of the #import to retrieve a snippet,\n   * then doing a `target.parentNode.insertBefore(importedElement, target)`.\n   * @param {string} url\n   * The URL of remote HTML snippet.\n   * @param {HTMLElement} target\n   * The DOM element where the resulting code should be appended.\n   * @param {string} callback\n   * Returns the HTMLElement/NodeList, which can be directly inserted into the DOM.\n   * @param {HTMLElement} callback.element\n   * The new DOM element/NodeList.\n   */\n  importBefore (url, target, callback) {\n    this.processImport(url, target, callback, true)\n  }\n\n  /**\n   * @method predns\n   * This notifies the browser domains which will be accessed at a later\n   * time. This helps the browser resolve DNS inquiries quickly.\n   * @param {string} domain\n   * The domain to resolve.\n   * @param {boolean} [crossorigin]\n   * Set to `true` to identify the request as a cross origin request.\n   * By default, NGN will compare the URL to the current URL in an\n   * attempt to determine if the request is across origins.\n   * @fires network-dns-prefetch\n   * Fired when a pre-fetched DNS request is issued to the browser.\n   */\n  predns (domain, cor) {\n    this.prelink(window.location.protocol + '//' + domain, 'dns-prefetch', cor)\n  }\n\n  /**\n   * @method preconnect\n   * Tell the browser which remote resources will or may be used in the\n   * future by issuing a `Preconnect`. This will resolve DNS (#predns), make the TCP\n   * handshake, and negotiate TLS (if necessary). This can be done directly\n   * in HTML without JS, but this method allows you to easily preconnect\n   * a resource in response to a user interaction or NGN.BUS activity.\n   * @param {string} url\n   * The URL to preconnect to.\n   * @param {boolean} [crossorigin]\n   * Set to `true` to identify the request as a cross origin request.\n   * By default, NGN will compare the URL to the current URL in an\n   * attempt to determine if the request is across origins.\n   * @fires network.preconnect\n   * Fired when a preconnect is issued to the browser.\n   */\n  preconnect (url, cor) {\n    this.prelink(url, 'preconnect', cor)\n  }\n\n  /**\n   * @method prefetch\n   * Fetch a specific resource and cache it.\n   * @param {string} url\n   * URL of the resource to download and cache.\n   * @param {boolean} [crossorigin]\n   * Set to `true` to identify the request as a cross origin request.\n   * By default, NGN will compare the URL to the current URL in an\n   * attempt to determine if the request is across origins.\n   * @fires network.prefetch\n   * Fired when a prefetch is issued to the browser.\n   */\n  prefetch (url, cor) {\n    this.prelink(url, 'prefetch', cor)\n  }\n\n  /**\n   * @method subresource\n   * A prioritized version of #prefetch. This should be used\n   * if the asset is required for the current page. Think of this\n   * as \"needed ASAP\". Otherwise, use #prefetch.\n   * @param {string} url\n   * URL of the resource to download and cache.\n   * @param {boolean} [crossorigin]\n   * Set to `true` to identify the request as a cross origin request.\n   * By default, NGN will compare the URL to the current URL in an\n   * attempt to determine if the request is across origins.\n   * @fires network.prefetch\n   * Fired when a prefetch is issued to the browser.\n   */\n  subresource (url, cor) {\n    this.prelink(url, 'subresource', cor)\n  }\n\n  /**\n   * @method prerender\n   * Prerender an entire page. This behaves as though a page is\n   * opened in a hidden tab, then displayed when called. This is\n   * powerful, but should only be used when there is absolute\n   * certainty that the prerendered page will be needed. Otherwise\n   * all of the assets are loaded for no reason (i.e. uselessly\n   * consuming bandwidth).\n   * @param {string} url\n   * URL of the page to download and cache.\n   * @param {boolean} [crossorigin]\n   * Set to `true` to identify the request as a cross origin request.\n   * By default, NGN will compare the URL to the current URL in an\n   * attempt to determine if the request is across origins.\n   * @fires network.prerender\n   * Fired when a prerender is issued to the browser.\n   */\n  prerender (url, cor) {\n    this.prelink(url, 'prerender', cor)\n  }\n\n  /**\n   * @method template\n   * Include a simple letiable replacement template and apply\n   * values to it. This is always cached client side.\n   * @param {string} url\n   * URL of the template to retrieve.\n   * @param {object} [letiables]\n   * A key/value objct containing letiables to replace in\n   * the template.\n   * @param {function} callback\n   * The callback receives a single argument with the HTMLElement/\n   * NodeList generated by the template.\n   */\n  template (url, data, callback) {\n    url = this.normalizeUrl(url)\n\n    if (typeof data === 'function') {\n      callback = data\n      data = {}\n    }\n\n    data = data || {}\n\n    let me = this\n    let tpl\n\n    // Check the cache\n    if (this.importCache.hasOwnProperty(url)) {\n      tpl = this.importCache[url]\n      return this.applyData(tpl, data, callback)\n    }\n\n    this.get(url, function (res) {\n      let ext = null\n      try {\n        ext = url.split('/').pop().split('?')[0].split('.').pop().toLowerCase()\n      } catch (e) {}\n      if (['js', 'css'].indexOf((ext || '').trim().toLowerCase()) >= 0) {\n        console.warn('Cannot use a .' + ext + ' file as a template. Only HTML templates are supported.')\n        return\n      }\n\n      me.importCache[url] = res.responseText\n      me.applyData(res.responseText, data, callback)\n    })\n  }\n}\n\nNGN.NET = new Network()\n","/**\n * @class NGN.DOM.svg\n * Provides a way to easily manage SVG images within a document while\n * retaining the ability to style them with external CSS.\n * @singleton\n */\n/* This file should be loaded in the <head>, not at the end of the <body>.\n* By loading this script before the rest of the DOM, it will insert the\n* FOUC (Flash of Unstyled Content) CSS into the page BEFORE unstyled SVG images\n* are loaded. If this script is included in the <body>, the CSS will be loaded\n* AFTER the SVG images are loaded, meaning they may display briefly before\n* proper styling can be applied to the DOM.\n*/\n\n// Prevent FOUC\n// (function () {\n//   let ss = document.createElement('style')\n//   let str = document.createTextNode('svg[src]{display:none}svg.loading{height:0px !important;width:0px !important}')\n//   ss.appendChild(str)\n//   document.head.appendChild(ss)\n// })()\nconst fuoc = function () {\n  var ss = document.createElement('style')\n  var str = document.createTextNode('svg[src]{display:none}svg.loading{height:0px !important;width:0px !important}')\n  ss.appendChild(str)\n  document.head.appendChild(ss)\n}\nfuoc()\n\n// SVG Controller\nNGN.DOM = NGN.DOM || {}\nNGN.DOM.svg = {}\n\nObject.defineProperties(NGN.DOM.svg, {\n  /**\n   * @property {Object} _cache\n   * A cache of SVG images.\n   */\n  _cache: NGN.private({}),\n\n  /**\n   * @method swap\n   * Replace image tags with the SVG equivalent.\n   * @param {HTMLElement|NodeList} imgs\n   * The HTML element or node list containing the images that should be swapped out for SVG files.\n   * @param {function} [callback]\n   * Executed when the image swap is complete. There are no arguments passed to the callback.\n   * @private\n   */\n  swap: NGN.privateconst(function (svgs, callback) {\n    let me = this\n    for (let i = 0; i < svgs.length; i++) {\n      let attr = svgs[i].attributes\n      let output = me._cache[svgs[i].getAttribute('src')]\n      let attrs = []\n\n      try {\n        attrs = /<svg(\\s.*=[\\\"\\'].*?[\\\"\\'])?>/i.exec(output)[1].trim()\n        let sep = /[\\\"\\']\\s/i.exec(attrs)\n        sep = sep !== null ? sep[0] : '\\\" '\n        attrs = attrs.replace(new RegExp(sep, 'gi'), sep.replace(/\\s/ig, ',')).split(',')\n      } catch (e) {\n        console.error(e)\n      }\n\n      attrs = Array.isArray(attrs) ? attrs : [attrs]\n\n      let map = attrs.map(function (els) {\n        return els.split('=')[0].trim().toLowerCase()\n      })\n\n      for (let x = 0; x < attr.length; x++) {\n        let idx = map.indexOf(attr[x].name.toLowerCase())\n        if (idx < 0) {\n          attrs.push(attr[x].name + '=\"' + attr[x].value + '\"')\n        } else {\n          attrs[idx] = attr[x].name + '=\"' + attr[x].value + '\"'\n        }\n      }\n\n      attrs = attrs.filter(function (a) {\n        return a.split('=')[0].toLowerCase() !== 'src'\n      })\n\n      let svg = '<svg ' + attrs.join(' ') + '>'\n\n      svgs[i].outerHTML = output.replace(/<svg.*?>/i, svg)\n    }\n\n    callback && callback()\n  }),\n\n  /**\n   * @method id\n   * @param  {string} url\n   * Create an ID that can be used to reference an SVG symbol.\n   * @return {string}\n   * @private\n   */\n  id: NGN.privateconst(function (url) {\n    return url.replace(/.*\\:\\/\\/|[^A-Za-z0-9]|www/gi, '')\n  }),\n\n  /**\n   * @method cleanCode\n   * Captures all of the content between the <svg></svg> tag.\n   * @param  {string} code\n   * The code to clean up.\n   * @return {string}\n   * @private\n   */\n  cleanCode: NGN.privateconst(function (code) {\n    try {\n      return code.toString().trim().replace(/(\\r\\n|\\n|\\r)/gm, '').replace(/\\s+/g, ' ').match(/\\<svg.*\\<\\/svg\\>/igm, '')[0]\n    } catch (e) {\n      return ''\n    }\n  }),\n\n  /**\n   * @method viewbox\n   * Retrieves the viewbox attribute from the source code.\n   * @param  {string} code\n   * The code to extract the viewbox attribute from.\n   * @return {string}\n   * @private\n   */\n  viewbox: NGN.privateconst(function (code) {\n    return /(viewbox=[\"'])(.*?)([\"'])/igm.exec(code.toString().trim())[2] || '0 0 100 100'\n  }),\n\n  cache: NGN.private(function (url, svg) {\n    this._cache[url] = svg\n  }),\n\n  fetchFile: NGN.private(function (url, callback) {\n    if (!callback) {\n      return\n    }\n\n    if (!NGN.nodelike || url.indexOf('http') === 0) {\n      let me = this\n      NGN.NET.get(url, function (res) {\n        callback && callback(res.status !== 200 ? new Error(res.responseText) : me.cleanCode(res.responseText))\n      })\n    } else {\n      let content = ''\n\n      try {\n        content = require('fs').readFileSync(require('path').resolve(url).replace('file://', '')).toString()\n      } catch (e) {\n        try {\n          content = require('fs').readFileSync(require('path').resolve(__dirname, url).replace('file://', '')).toString()\n        } catch (ee) {}\n      }\n\n      callback(content)\n    }\n  }),\n\n  /**\n   * @method update\n   * Replace any <img src=\"*.svg\"> with the SVG equivalent.\n   * @param {HTMLElement|NodeList} section\n   * The HTML DOM element to update. All children of this element will also be updated.\n   * @param {function} callback\n   * Execute this function after the update is complete.\n   */\n  update: NGN.const(function (section, callback) {\n    if (typeof section === 'function') {\n      callback = section\n      section = document.body\n    } else {\n      section = section || document.body\n    }\n\n    if (section.nodeName === '#text') {\n      return\n    }\n\n    let me = this\n    section = section.hasOwnProperty('length') === true\n      ? NGN._splice(section)\n      : [section]\n\n    section.forEach(function (sec) {\n      let imgs = sec.querySelectorAll('svg[src]')\n\n      // Loop through images, prime the cache.\n      for (let i = 0; i < imgs.length; i++) {\n        me._cache[imgs[i].getAttribute('src')] = me._cache[imgs[i].getAttribute('src')] || null\n      }\n\n      // Fetch all of the unrecognized svg files\n      let unfetched = Object.keys(me._cache).filter(function (url) {\n        return me._cache[url] === null\n      })\n\n      let remaining = unfetched.length\n      unfetched.forEach(function (url) {\n        me.fetchFile(url, function (content) {\n          if (!(content instanceof Error)) {\n            me.cache(url, content)\n          }\n          remaining--\n        })\n      })\n\n      // Monitor for download completion\n      let monitor = setInterval(function () {\n        if (remaining === 0) {\n          clearInterval(monitor)\n          me.swap(imgs, callback)\n        }\n      }, 5)\n    })\n  })\n})\n"],"sourceRoot":"/source/"}