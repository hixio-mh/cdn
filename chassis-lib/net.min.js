/**
  * v1.0.121 generated on: Tue Aug 16 2016 17:43:19 GMT+0000 (UTC)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved. See LICENSE (BSD).
  */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),parser=new DOMParser,fs=NGN.nodelike?require("fs"):null,Network=function(){function e(){_classCallCheck(this,e),Object.defineProperties(this,{xhr:NGN.privateconst(function(e){var t=void 0;return window.XMLHttpRequest&&(t=new XMLHttpRequest),t.onreadystatechange=function(){4===t.readyState&&e&&e(t)},t}),run:NGN.privateconst(function(e,t,n){var r=NGN.NET.xhr(n);r.open(e,t,!0),r.send()}),applyRequestSettings:NGN.privateconst(function(e,t){if(!e||!t)throw new Error("No XHR or configuration object defined.");if(t.params){var n=Object.keys(t.params).map(function(e){return e+"="+encodeURIComponent(t.params[e])});t.url+="?"+n.join("&")}e.open(t.method||"POST",t.url,!0),t.header=t.header||t.headers||{},Object.keys(t.header).forEach(function(n){e.setRequestHeader(n,t.header[n])});var r=null;return t.json?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/jsoncharset=UTF-8"),r=JSON.stringify(t.json).trim()):t.body?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/text"),r=t.body):t.form&&(r=new FormData,Object.keys(t.form).forEach(function(e){r.append(e,t.form[e])})),t.withCredentials&&(e.withCredentials=t.withCredentials),t.username&&t.password?e.setRequestHeader("Authorization","Basic "+btoa(t.username+":"+t.password)):t.accessToken&&e.setRequestHeader("Authorization","Bearer "+t.accessToken),r}),prepend:NGN.privateconst(function(e,t){return e=NGN.slice(e),e.unshift(t),e}),getFile:NGN.privateconst(function(e){if(null!==fs){var t={status:fs.existsSync(e.replace("file://",""))?200:400};return t.responseText=200===t.status?fs.readFileSync(e.replace("file://","")).toString():"File could not be found.",t}throw new Error(e+" does not exist or could not be found.")}),normalizeUrl:NGN.privateconst(function(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/").replace(/\:\/{3,50}/gi,"://")}),processImport:NGN.privateconst(function(e,t,n,r){r=void 0!==r&&r,this["import"](e,function(e){if("string"==typeof e)e=document.createTextNode(e);else if(e.length){var o=function(){var o=[];return NGN.slice(e).forEach(function(e){r?(o.push(t.parentNode.insertBefore(e,t)),t=e):o.push(t.appendChild(e))}),n&&n(o),{v:void 0}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}r?t.parentNode.insertBefore(e,t):t.appendChild(e),n&&n(e)})}),domainRoot:NGN.privateconst(function(e){var t=e.search(/^https?\:\/\//)!==-1?e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i,""):e.match(/^([^\/?#]+)(?:[\/?#]|$)/i,"");return null===t||t[1].length<3?window.location.host:t[1]}),isCrossOrigin:NGN.privateconst(function(e){return this.domainRoot(e)!==window.location.host}),prelink:NGN.privateconst(function(e,t,n){if(!document.head)return void console.warn("Cannot use a preconnect, predns, etc because there is no HEAD in the HTML document.");var r=document.createElement("link");r.rel=t,r.href="http"!==e.trim().toLowerCase().substr(0,4)?this.normalizeUrl(window.location.origin+window.location.pathname+e):e,NGN.coalesce(n,this.isCrossOrigin(e))&&r.setAttribute("crossorigin","true"),document.head.appendChild(r),NGN.BUS.emit("network."+t)}),importCache:NGN["private"]({}),createElement:NGN.privateconst(function(e){return parser.parseFromString(e,"text/html").querySelector("body").children}),applyData:NGN.privateconst(function(e,t,n){if(void 0===e)return console.warn("Empty template."),void(n&&n());Object.keys(t).forEach(function(n){var r=new RegExp("{{"+n+"}}","gm");e=e.replace(r,t[n])}),e=e.replace(/(\{\{.*\}\})/gm,"");var r=this.createElement(e);n&&n(r[0])})})}return _createClass(e,[{key:"send",value:function(e,t){e=e||{};var n=this.xhr(t),r=this.applyRequestSettings(n,e);n.send(r)}},{key:"get",value:function(){if("object"===_typeof(arguments[0])){var e=arguments[0];return e.method="GET",e.url="string"==typeof arguments[1]?arguments[1]:e.url,e.url.substr(0,4)&&NGN.nodelike?arguments[arguments.length-1](this.getFile(e.url)):this.send(e,arguments[arguments.length-1])}return"file"===arguments[0].substr(0,4)&&NGN.nodelike?arguments[arguments.length-1](this.getFile(arguments[0])):void this.run.apply(this.run,this.prepend(arguments,"GET"))}},{key:"head",value:function(e,t){if("object"===_typeof(arguments[0])){var n=arguments[0];return n.method="HEAD",n.url="string"==typeof arguments[1]?arguments[1]:n.url,this.send(n,arguments[arguments.length-1])}this.run.apply(this.run,this.prepend(arguments,"HEAD"))}},{key:"put",value:function(e,t){e=e||{},e.method="PUT",e.url=e.url||window.location,this.send(e,t)}},{key:"post",value:function(e,t){e=e||{},e.method="POST",e.url=e.url||window.location,this.send(e,t)}},{key:"delete",value:function(){this.run.apply(this.run,this.prepend(arguments,"DELETE"))}},{key:"json",value:function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null),null===e?this.run("GET",t,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(r){e.json=null}n&&n(e.json)}):(e.url=t,this.get(e,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(r){e.json=null}n&&n(e.json)}))}},{key:"import",value:function(e,t,n){var r=this;if(Array.isArray(e)){var o=function(){var o=r,i=new Array(e.length),s=0;return e.forEach(function(e,t){o["import"](e,function(e){i[t]=e,s++},n)}),t&&!function(){var n=setInterval(function(){s===e.length&&(clearInterval(n),t(i))},5)}(),{v:void 0}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}var i=null;try{!function(){i=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase();var n=void 0;"js"===i?(n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e)):"css"===i&&(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),n.onload="function"==typeof t?function(){t(n)}:function(){},document.getElementsByTagName("head")[0].appendChild(n)}()}catch(s){}if(!(["js","css"].indexOf((i||"").trim().toLowerCase())>=0)){if(n="boolean"==typeof n&&n,"http"!==e.substr(0,4)){var a=window.location.href.split("/");a.pop(),e=a.join("/")+"/"+e}if(!n&&this.importCache.hasOwnProperty(e)){var u=this.createElement(this.importCache[e]);return t&&t(1===u.length?u[0]:u),void(window.NGN.BUS&&window.NGN.BUS.emit("html.import",1===u.length?u[0]:u))}var c=this;this.get(e,function(n){if(200!==n.status)return console.warn("Check the file path of the snippet that needs to be imported. "+e+" could not be found ("+n.status+")");var r=c.createElement(n.responseText);if(c.importCache[e]=n.responseText,0===r.length)console.warn(c.normalizeUrl(e)+" import has no HTML tags."),t&&t(n.responseText),window.NGN.BUS&&window.NGN.BUS.emit("html.import",n.responseText);else{var o=1===r.length?r[0]:r;t&&t(o),window.NGN.BUS&&window.NGN.BUS.emit("html.import",o)}})}}},{key:"importTo",value:function(e,t,n){this.processImport(e,t,n)}},{key:"importBefore",value:function(e,t,n){this.processImport(e,t,n,!0)}},{key:"predns",value:function(e,t){this.prelink(window.location.protocol+"//"+e,"dns-prefetch",t)}},{key:"preconnect",value:function(e,t){this.prelink(e,"preconnect",t)}},{key:"prefetch",value:function(e,t){this.prelink(e,"prefetch",t)}},{key:"subresource",value:function(e,t){this.prelink(e,"subresource",t)}},{key:"prerender",value:function(e,t){this.prelink(e,"prerender",t)}},{key:"template",value:function(e,t,n){e=this.normalizeUrl(e),"function"==typeof t&&(n=t,t={}),t=t||{};var r=this,o=void 0;return this.importCache.hasOwnProperty(e)?(o=this.importCache[e],this.applyData(o,t,n)):void this.get(e,function(o){var i=null;try{i=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase()}catch(s){}return["js","css"].indexOf((i||"").trim().toLowerCase())>=0?void console.warn("Cannot use a ."+i+" file as a template. Only HTML templates are supported."):(r.importCache[e]=o.responseText,void r.applyData(o.responseText,t,n))})}}]),e}();NGN.NET=new Network;
//# sourceMappingURL=https://ngnjs.github.io/cdn/assets/chassis-lib/sourcemaps/1.0.121/net.min.js.map