/**
  * v1.0.58 generated on: Wed Jun 29 2016 23:17:21 GMT+0000 (UTC)
  * Copyright (c) 2014-2016, Ecor Ventures LLC. All Rights Reserved. See LICENSE (BSD).
  */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();if(!window.NGN)throw new Error("The EventEmitter class is dependent on the presence of NGN.");var EventEmitter=function(){function e(t){_classCallCheck(this,e),t=t||{},Object.defineProperties(this,{handlers:NGN["private"]({}),adhoc:NGN["private"]({}),maxlisteners:NGN["private"](t.defaultMaxListeners||10)})}return _createClass(e,[{key:"listenerCount",value:function(e){return(this.handlers[e]||[]).length+(this.adhoc[e]||[]).length}},{key:"getMaxListeners",value:function(){return this.defaultMaxListeners}},{key:"setMaxListeners",value:function(e){this.defaultMaxListeners=e}},{key:"eventNames",value:function(){var e=Object.keys(this.handlers),t=Object.keys(this.adhoc);return NGN.dedupe(e.concat(t))}},{key:"listeners",value:function(e){var t=this.handlers[e]||[],n=this.adhoc[e]||[];return t.concat(n)}},{key:"on",value:function(e,t,n){if(this.handlers[e]=this.handlers[e]||[],this.handlers[e][NGN.coalesce(n,!1)?"unshift":"push"](t),this.emit("newListener",e,t),this.listenerCount(e)>this.maxlisteners)throw new Error("Maximum event listeners exceeded. Use setMaxListeners() to adjust the level.")}},{key:"addListener",value:function(){this.on.apply(this,arguments)}},{key:"prependListener",value:function(){var e=NGN.slice(arguments).push(!0);this.on.apply(this,e)}},{key:"once",value:function(e,t,n){if(this.adhoc[e]=this.adhoc[e]||[],this.adhoc[e][NGN.coalesce(n,!1)?"unshift":"push"](t),this.emit("newListener",e,t),this.listenerCount(e)>this.maxlisteners)throw new Error("Maximum event listeners exceeded. Use setMaxListeners() to adjust the level.")}},{key:"prependOnceListener",value:function(){var e=NGN.slice(arguments).push(!0);this.once.apply(this,e)}},{key:"off",value:function(e,t){if(this.handlers[e]){if(!t)return void delete this.handlers[e];for(var n=this.handlers[e].indexOf(t);n>=0;)this.handlers[e].splice(n,1),this.emit("removeListener",e,t),n=this.handlers[e].indexOf(t);0===this.handlers[e].length&&delete this.handlers[e]}}},{key:"onceoff",value:function(e,t){if(this.adhoc[e]){if(!t)return void delete this.adhoc[e];for(var n=this.adhoc[e].indexOf(t);n>0;)this.adhoc.splice(n,1),n=this.adhoc[e].indexOf(t);0===this.adhoc[e].length&&delete this.adhoc[e]}}},{key:"removeListener",value:function(){this.off.apply(this,arguments),this.onceoff.apply(this,arguments)}},{key:"clear",value:function(){this.handlers={},this.adhoc={}}},{key:"removeAllListeners",value:function(){this.clear()}},{key:"emit",value:function(){var e=NGN.slice(arguments),t=e.shift(),n=this.getAllEvents(t),s={event:t};for(var i in n){var r=this.adhoc[n[i]];if(r)for(delete this.adhoc[n[i]];r.length>0;){var a=r.pop();s.handler=a,a.apply(s,e)}var h=this.handlers[n[i]];if(h)for(var l in h)s.handler=h[l],h[l].apply(s,e)}}},{key:"getAllEvents",value:function(e){var t=Object.keys(this.handlers),n=Object.keys(this.adhoc),s=NGN.dedupe(t.concat(n));return s=s.filter(function(t){return t===e||("regexp"===NGN["typeof"](t)||t.indexOf("*")>=0)&&("regexp"!==NGN["typeof"](t)&&(t=new RegExp(t.replace("*",".*","gi"))),t.test(e))})}},{key:"subscribers",get:function(){var e={};for(var t in this.handlers)e[t]={handler:this.handlers[t].length,adhoc:0};for(var n in this.adhoc)e[n]=e[n]||{handler:0},e[n].adhoc=this.adhoc[n].length;return e}},{key:"defaultMaxListeners",get:function(){return this.maxlisteners},set:function(e){this.maxlisteners=e}}]),e}();NGN.extend("EventEmitter",NGN["private"](EventEmitter));